<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
    
        <link rel="stylesheet" href="index.css">
    
        <title>DnD</title>
        <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.4/css/all.css">
        <!--include character sheet css-->
        <link rel="stylesheet" href="sheet_styles/shared.css">
        <link rel="stylesheet" href="sheet_styles/charactersheet.css">
        <link rel="stylesheet" href="sheet_styles/detailssheet.css">
        <link rel="stylesheet" href="sheet_styles/spellcastingsheet.css">
        <!--end of character sheet css-->
        <script type="text/javascript">
            (function() {
                "use strict";
        
                /**
                 * Shorthand helper function to getElementById
                 * @param id
                 * @returns {Element}
                 */
                let d = function (id) {
                    return document.getElementById(id);
                };
        
                let ClassHelper = (function() {
                    return {
                        addClass: function(ele, name) {
                            let classes = ele.className.length !== 0 ? ele.className.split(" ") : [];
                            let index = classes.indexOf(name);
                            if (index === -1) {
                                classes.push(name);
                                ele.className = classes.join(" ");
                            }
                        },
        
                        removeClass: function(ele, name) {
                            let classes = ele.className.length !== 0 ? ele.className.split(" ") : [];
                            let index = classes.indexOf(name);
                            if (index !== -1) {
                                classes.splice(index, 1);
                            }
                            ele.className = classes.join(" ");
                        }
                    };
                })();
    
            })();
        </script>
        <script type="text/javascript">
            let is64;
            let inputs;
            let inputsArray;
            let states = ['On.png', 'Off.png', 'DownOn.png', 'DownOff.png', 'RollOn.png', 'RollOff.png'];
            let states64 = ['imageOn', 'imageOff', 'imageDownOn', 'imageDownOff', 'imageRollOn', 'imageRollOff'];

            function SelectHasValue(select, value) {
                obj = document.getElementById(select);

                if (obj !== null) {
                    return (obj.innerHTML.indexOf('value="' + value + '"') > -1);
                } else {
                    return false;
                }
            }
            
            function setImage(input, state) {
                if (inputs[input].getAttribute('images').charAt(state) === '1') {
                    document.getElementById(inputs[input].getAttribute('id') + "_img").src = getSrc(input, state);
                }
            }
            
            function getSrc(input, state) {
                let src;
                if (is64) {
                    src = inputs[input].getAttribute(states64[state]);
                } else {
                    src = inputs[input].getAttribute('imageName') + states[state];
                }
                return src;
            }
            
            function replaceChecks(isBase64) {
            
                is64 = isBase64;
                //get all the input fields on the page
                inputs = document.getElementsByTagName('input');
            
                //cycle trough the input fields
                for(let i=0; i<inputs.length; i++) {
                    if(inputs[i].hasAttribute('images'))
            
                    //check if the input is a checkbox
                        if(inputs[i].getAttribute('class') !== 'idr-hidden' && inputs[i].getAttribute('data-imageAdded') !== 'true' && (inputs[i].getAttribute('type') === 'checkbox' || inputs[i].getAttribute('type') === 'radio')) {
                            //create a new image
                            let img = document.createElement('img');
            
                            //check if the checkbox is checked
                            if(inputs[i].checked) {
                                if(inputs[i].getAttribute('images').charAt(0) === '1')
                                    img.src = getSrc(i, 0);
                            } else {
                                if(inputs[i].getAttribute('images').charAt(1) === '1')
                                    img.src = getSrc(i, 1);
                            }
            
                            //set image ID
                            img.id = inputs[i].getAttribute('id') + "_img";
            
                            //set action associations
                            img.onclick = new Function('checkClick('+i+')');
                            img.onmousedown = new Function('checkDown('+i+')');
                            img.onmouseover = new Function('checkOver('+i+')');
                            img.onmouseup = new Function('checkRelease('+i+')');
                            img.onmouseout = new Function('checkRelease('+i+')');
            
                            img.style.position = "absolute";
                            let style = window.getComputedStyle(inputs[i]);
                            img.style.top = style.top;
                            img.style.left = style.left;
                            img.style.width = style.width;
                            img.style.height = style.height;
                            img.style.zIndex = style.zIndex;
            
                            //place image in front of the checkbox
                            inputs[i].parentNode.insertBefore(img, inputs[i]);
                            inputs[i].setAttribute('data-imageAdded','true');

                            //save i as data attribute to make statechange per code possible
                            inputs[i].setAttribute("data-i", i)
            
                            //hide the checkbox
                            inputs[i].style.display='none';
                        }
                }
            }   

            function checkClick(i) {
                if(!inputs[i].hasAttribute('images')) return;
                if(inputs[i].checked) {
                    inputs[i].removeAttribute('checked');
                    setImage(i, 1);
                } else {
                    inputs[i].setAttribute('checked', 'checked');

                    setImage(i, 0);

                    if(inputs[i].getAttribute('name') !== null){
                        for(let index=0; index<inputs.length; index++) {
                            if(index !== i && inputs[index].getAttribute('name') === inputs[i].getAttribute('name')){
                                inputs[index].checked = '';
                                setImage(index, 1);
                            }
                        }
                    }
                }
                inputs[i].onchange(event);
            }

            function checkClickNoEvent(i) {
                if(!inputs[i].hasAttribute('images')) return;
                if(inputs[i].checked) {
                    inputs[i].removeAttribute('checked');
                    setImage(i, 1);
                } else {
                    inputs[i].setAttribute('checked', 'checked');

                    setImage(i, 0);

                    if(inputs[i].getAttribute('name') !== null){
                        for(let index=0; index<inputs.length; index++) {
                            if(index !== i && inputs[index].getAttribute('name') === inputs[i].getAttribute('name')){
                                inputs[index].checked = '';
                                setImage(index, 1);
                            }
                        }
                    }
                }
            }

            function fixChecked(i) {
                if(!inputs[i].hasAttribute('images')) return;
                if(inputs[i].checked) {
                    setImage(i, 0);
                } else {
                    setImage(i, 1);
                }
            }

            function fixCheckedAll() {
                for (let index = 0; index < inputs.length; index++) {
                    fixChecked(index)
                }
            }
            
            function checkRelease(i) {
                if(!inputs[i].hasAttribute('images')) return;
                if(inputs[i].checked) {
                    setImage(i, 0);
                } else {
                    setImage(i, 1);
                }
            }
            
            function checkDown(i) {
                if(!inputs[i].hasAttribute('images')) return;
                if(inputs[i].checked) {
                    setImage(i, 2);
                } else {
                    setImage(i, 3);
                }
            }
            
            function checkOver(i) {
                if(!inputs[i].hasAttribute('images')) return;
                if(inputs[i].checked) {
                    setImage(i, 4);
                } else {
                    setImage(i, 5);
                }
            }
            
            function onCharacterBlurEvent (event) {
                if (!dm) {
                    socket.emit("updateCharacterSheet", {
                        elementID: event.target.id.replace("_img", ""),
                        type: "text",
                        value: event.target.value,
                        session_code: localStorage.getItem("session_code")
                    })
                    switch (event.target.id) {
                        case "hpMax":
                        case "hpCurrent":
                            socket.emit("updatePlayerHP", {
                                hpNow: document.getElementById("hpCurrent").value,
                                hpMax: document.getElementById("hpMax").value,
                                session_code: localStorage.getItem("session_code")
                            })
                            break;
                        default:
                            break;
                    }
                    localStorage.setItem(event.target.id.replace("_img", ""), event.target.value)
                } else if (currentPlayer == "self") {
                    localStorage.setItem(event.target.id.replace("_img", ""), event.target.value)
                }
            }

            function onCharacterCheck (event) {
                event.target.checked = event.target.src.endsWith("On.png")
            
                if (!dm) {
                    socket.emit("updateCharacterSheet", {
                        elementID: event.target.id.replace("_img", ""),
                        type: "checkbox",
                        checked: event.target.checked,
                        session_code: localStorage.getItem("session_code")
                    })
                    localStorage.setItem(event.target.id.replace("_img", ""), event.target.checked)
                } else if (currentPlayer == "self") {
                    localStorage.setItem(event.target.id.replace("_img", ""), event.target.checked)
                }
            }

            function onDetailsBlurEvent (event) {
                if (!dm) {
                    socket.emit("updateDetailsSheet", {
                        elementID: event.target.id.replace("_img", ""),
                        type: "text",
                        value: event.target.value,
                        session_code: localStorage.getItem("session_code")
                    })
                    localStorage.setItem(event.target.id.replace("_img", ""), event.target.value)
                } else if (currentPlayer == "self") {
                    localStorage.setItem(event.target.id.replace("_img", ""), event.target.value)
                }
            }

            function onDetailsCheck (event) {
                event.target.checked = event.target.src.endsWith("On.png")

                if (!dm) {
                    socket.emit("updateDetailsSheet", {
                        elementID: event.target.id.replace("_img", ""),
                        type: "checkbox",
                        checked: event.target.checked,
                        session_code: localStorage.getItem("session_code")
                    })

                    localStorage.setItem(event.target.id.replace("_img", ""), event.target.checked)
                } else if (currentPlayer == "self") {
                    localStorage.setItem(event.target.id.replace("_img", ""), event.target.checked)
                }
            }

            function onSpellcastingBlurEvent (event) {
                if (!dm) {
                    socket.emit("updateSpellcastingSheet", {
                        elementID: event.target.id.replace("_img", ""),
                        type: "text",
                        value: event.target.value,
                        session_code: localStorage.getItem("session_code")
                    })
                    localStorage.setItem(event.target.id.replace("_img", ""), event.target.value)
                } else if (currentPlayer == "self") {
                    localStorage.setItem(event.target.id.replace("_img", ""), event.target.value)
                }
            }

            function onSpellcastingCheck (event) {
                event.target.checked = event.target.src.endsWith("On.png")

                if (!dm) {
                    socket.emit("updateSpellcastingSheet", {
                        elementID: event.target.id.replace("_img", ""),
                        type: "checkbox",
                        checked: event.target.checked,
                        session_code: localStorage.getItem("session_code")
                    })
                    
                    localStorage.setItem(event.target.id.replace("_img", ""), event.target.checked)
                } else if (currentPlayer == "self") {
                    localStorage.setItem(event.target.id.replace("_img", ""), event.target.checked)
                }
            }
        </script>
        <script src="node_modules/socket.io/client-dist/socket.io.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/split.js/1.6.0/split.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/async@3.2.2/dist/async.min.js"></script>
        <script src="https://unpkg.com/pdf-lib/dist/pdf-lib.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.7.1/jszip.min.js" integrity="sha512-xQBQYt9UcgblF6aCMrwU1NkVA7HCXaSN2oq0so80KO+y68M+n64FOcqgav4igHe6D5ObBLIf68DWv+gfBowczg==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.0/FileSaver.min.js" integrity="sha512-csNcFYJniKjJxRWRV1R7fvnXrycHP6qDR21mgz1ZP55xY5d+aHLfo9/FcGDQLfn2IfngbAHd8LdfsagcCqgTcQ==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
        <script>
            let currentTab = "characterSheet";
            let dm = false;
            let currentPlayer = "self";
    
            //let socket = io('http://localhost:3000');
            let socket = io('https://dnd-server.glitch.me');

            function echo(text) {
                console.log(text)
            }
    
            socket.on("loadOwlbear", (data) => {
                document.getElementById("owlbearEmbed").src = data.url;
                console.log("Loading Owlbear")
            });
    
            socket.on("dmAssigned", () => {
                document.getElementById("login").style.display = "none";
                socket.emit("loadPlayerData", {
                    playerName: ((localStorage.getItem("playername") != null && localStorage.getItem("playername") != "" && localStorage.getItem("playername") != undefined) ? localStorage.getItem("playername") : "Unknown Player"),
                    hpNow: ((localStorage.getItem("hpCurrent") != null && localStorage.getItem("hpCurrent") != "" && localStorage.getItem("hpCurrent") != undefined) ? localStorage.getItem("hpCurrent") : ""),
                    hpMax: ((localStorage.getItem("hpMax") != null && localStorage.getItem("hpMax") != "" && localStorage.getItem("hpMax") != undefined) ? localStorage.getItem("hpMax") : ""),
                    session_code: localStorage.getItem("session_code")
                })
            })
    
            socket.on("dmRemoved", () => {
                document.getElementById("login").style.display = "block"
                document.getElementById("playerSelectContainer").style.display = "none"
                document.getElementById("owlbearEmbed").src = ""

                let hpWrap = document.querySelector("[data-player='You']")
                if (hpWrap != undefined && hpWrap != null) {
                    hpWrap.remove()
                }
                document.getElementById("playerHPContainer").style.display = "none"
            })
    
            let sizes = localStorage.getItem('split-sizes')
    
            if (sizes) {
                sizes = JSON.parse(sizes)
            } else {
                sizes = [99, 1]
            }
    
            function openTab(evt, tabId) {
                let i, tabcontent, tablinks;
    
                tabcontent = document.getElementsByClassName("tabcontent");
                for (i = 0; i < tabcontent.length; i++) {
                    tabcontent[i].style.display = "none";
                }
    
                tablinks = document.getElementsByClassName("tablinks");
                for (i = 0; i < tablinks.length; i++) {
                    tablinks[i].className = tablinks[i].className.replace(" active", "");
                }
    
                document.getElementById(tabId).style.display = "block";
                evt.currentTarget.className += " active";
            }

            async function showSpellInfo(element) {
                if (element.value.trim() == "")
                    return

                let inputWrapper
                if (element.parentNode.className != "input-wrapper") {
                    inputWrapper = document.createElement("div")
                    inputWrapper.classList.add("input-wrapper")
                    element.parentNode.insertBefore(inputWrapper, element)
                    inputWrapper.appendChild(element)
                } else {
                    inputWrapper = element.parentNode
                }
                
                let spellname = element.value.toLowerCase().trim().replaceAll(" ", "-").split("(")[0].trim()
                let baseUrl = "http://dnd5e.wikidot.com/spell:"
                let url = baseUrl + spellname

                let tooltipDiv = document.createElement("div")
                tooltipDiv.classList.add("tooltip")
                tooltipDiv.innerHTML = await window.spells.getSpellInfo(url)
                tooltipDiv.innerHTML = "<button class='button-x' onclick='hideSpellInfo(event)' type='button'><i class='far fa-times-circle' onclick='hideSpellInfo(event)'></i></button>" + tooltipDiv.innerHTML

                let compStyle = window.getComputedStyle(element)
                Array.from(compStyle).forEach(
                    key => tooltipDiv.style.setProperty(key, compStyle.getPropertyValue(key))
                )

                inputWrapper.appendChild(tooltipDiv)
            }

            async function showSpellInfoRight(element) {
                if (element.value.trim() == "")
                    return

                let inputWrapper
                if (element.parentNode.className != "input-wrapper") {
                    inputWrapper = document.createElement("div")
                    inputWrapper.classList.add("input-wrapper")
                    element.parentNode.insertBefore(inputWrapper, element)
                    inputWrapper.appendChild(element)
                } else {
                    inputWrapper = element.parentNode
                }
                
                let spellname = element.value.toLowerCase().trim().replaceAll(" ", "-").split("(")[0].trim()
                let baseUrl = "http://dnd5e.wikidot.com/spell:"
                let url = baseUrl + spellname

                let tooltipDiv = document.createElement("div")
                tooltipDiv.classList.add("tooltip-right")
                tooltipDiv.innerHTML = await window.spells.getSpellInfo(url)
                tooltipDiv.innerHTML = "<button class='button-x' onclick='hideSpellInfo(event)' type='button'><i class='far fa-times-circle' onclick='hideSpellInfo(event)'></i></button>" + tooltipDiv.innerHTML

                let compStyle = window.getComputedStyle(element)
                Array.from(compStyle).forEach(
                    key => tooltipDiv.style.setProperty(key, compStyle.getPropertyValue(key))
                )

                inputWrapper.appendChild(tooltipDiv)
            }

            function hideSpellInfo(event) {
                let inputWrapper = event.currentTarget.parentNode.parentNode
                if (inputWrapper.className != "input-wrapper") return
                let removedTooltip = false
                let finished = false
                while (!finished) {
                    const children = inputWrapper.children
                    for(let i = 0; i < children.length; i++) {
                        if (children[i].tagName != "INPUT") {
                            children[i].remove()
                            removedTooltip = true
                        }
                    }
                    if (!removedTooltip)
                        finished = true
                    
                    removedTooltip = false
                }
            }

            function updatePlayerHP (data) {
                let hpWrapDiv = document.querySelector("[data-player='" + data.player + "']")
                if (hpWrapDiv != undefined && hpWrapDiv != null) {

                    let hBar = hpWrapDiv.lastChild.lastChild
                    let hHit = hBar.lastChild

                    let total = hpWrapDiv.lastChild.getAttribute('data-total')
                    let value = hpWrapDiv.lastChild.getAttribute('data-value')

                    if (data.hpNow != undefined && data.hpNow != null && data.hpNow != "") {
                        let damage = value-data.hpNow

                        let barWidth = (data.hpNow / total) * 100
                        let hitWidth = (damage / value) * 100 + "%"

                        if (barWidth > 100 || barWidth == Infinity || barWidth == -Infinity) 
                            barWidth = 100

                        hpWrapDiv.lastChild.setAttribute("data-value", data.hpNow)
                        hHit.style.width = hitWidth

                        setTimeout(() => {
                            hHit.style.width = 0
                            hBar.style.width = barWidth + "%"
                        }, 500);
                    } else {
                        hpWrapDiv.lastChild.setAttribute("data-value", "0")
                        hHit.style.width = "100%"

                        setTimeout(() => {
                            hHit.style.width = 0
                            hBar.style.width = 0
                        }, 500);
                    }

                    if (data.hpMax != undefined && data.hpMax != null && data.hpMax != "") {
                        total = data.hpMax

                        let barWidth = (data.hpNow / total) * 100

                        if (barWidth > 100 || barWidth == Infinity || barWidth == -Infinity) 
                            barWidth = 100

                        hpWrapDiv.lastChild.setAttribute("data-total", data.hpMax)

                        hBar.style.width = barWidth + "%"
                    } else {
                        total = 100

                        let barWidth = (value / total) * 100

                        if (barWidth > 100 || barWidth == Infinity || barWidth == -Infinity) 
                            barWidth = 100

                        hpWrapDiv.lastChild.setAttribute("data-total", "100")

                        hBar.style.width = barWidth + "%"
                    }
                }
            }
        
            function loadSheetsFromPdf() {
                let PDFDocument = PDFLib.PDFDocument

                let inputElement = document.createElement("input")

                inputElement.type = "file"

                inputElement.setAttribute("multiple", "")

                inputElement.accept = ".pdf"

                inputElement.addEventListener("change", async (event) => {
                    async.forEachOf(event.target.files, async (file) => {
                        const formUrl = file.path
                        const formPdfBytes = await fetch(formUrl).then(res => res.arrayBuffer())
                        let form = await PDFDocument.load(formPdfBytes)
                        form = form.getForm()

                        const fields = form.getFields()
                        fields.forEach(field => {
                            const name = field.getName()
                            let element = document.querySelector("[data-field-name='" + name + "']")

                            if (element != undefined && (typeof field.getText == "function" || typeof field.isChecked == "function")) {
                                if (element.matches('[type="checkbox"]')) {
                                    element.checked = field.isChecked()
                                } else {
                                    element.value = field.getText() ? field.getText() : ""
                                }
                            }
                        })
                    }).then(() => {
                        fixCheckedAll()
                        saveAll()
                    })
                })
                
                inputElement.dispatchEvent(new MouseEvent("click")); 
            }

            async function exportSheetsToPdf() {
                let PDFDocument = PDFLib.PDFDocument

                let sheetDoc = await PDFDocument.load(window.pdfs.readCharacterSheet())
                let detailsDoc = await PDFDocument.load(window.pdfs.readDetailsSheet())
                let spellcastingDoc = await PDFDocument.load(window.pdfs.readSpellcastingSheet())

                let sheetForm = sheetDoc.getForm()
                let detailsForm = detailsDoc.getForm()
                let spellcastingForm = spellcastingDoc.getForm()

                let elements = document.querySelectorAll("[data-field-name]")

                let characterSheetNode = document.querySelector("[id='characterSheet']")
                let characterDetailsNode = document.querySelector("[id='characterDetails']")
                let spellcastingNode = document.querySelector("[id='spellcasting']")

                elements.forEach(element =>  {
                    if (characterSheetNode.contains(element)) {
                        if (element.matches('[type="checkbox"]')) {
                            if (element.checked) {
                                sheetForm.getCheckBox(element.getAttribute("data-field-name")).check()
                            } else {
                                sheetForm.getCheckBox(element.getAttribute("data-field-name")).uncheck()
                            }
                        } else if (element.type == "text" || element.tagName.toLowerCase() == "textarea"){
                            sheetForm.getTextField(element.getAttribute("data-field-name")).setText(element.value)
                        }
                    } else if (characterDetailsNode.contains(element)) {
                        if (element.matches('[type="checkbox"]')) {
                            if (element.checked) {
                                detailsForm.getCheckBox(element.getAttribute("data-field-name")).check()
                            } else {
                                detailsForm.getCheckBox(element.getAttribute("data-field-name")).uncheck()
                            }
                        } else if (element.type == "text" || element.tagName.toLowerCase() == "textarea"){
                            detailsForm.getTextField(element.getAttribute("data-field-name")).setText(element.value)
                        }
                    } else if (spellcastingNode.contains(element)) {
                        if (element.matches('[type="checkbox"]')) {
                            if (element.checked) {
                                spellcastingForm.getCheckBox(element.getAttribute("data-field-name")).check()
                            } else {
                                spellcastingForm.getCheckBox(element.getAttribute("data-field-name")).uncheck()
                            }
                        } else if (element.type == "text" || element.tagName.toLowerCase() == "textarea"){
                            spellcastingForm.getTextField(element.getAttribute("data-field-name")).setText(element.value)
                        }
                    }
                })

                let sheetBlob = genSheetBlob(await sheetDoc.save({ updateFieldAppearances: true }), "application/pdf")
                let detailsBlob = genSheetBlob(await detailsDoc.save({ updateFieldAppearances: true }), "application/pdf")
                let spellcastingBlob = genSheetBlob(await spellcastingDoc.save({ updateFieldAppearances: true }), "application/pdf")

                let zip = new JSZip()

                zip.file("CharacterSheet.pdf", sheetBlob)
                zip.file("CharacterDetails.pdf", detailsBlob)
                zip.file("SpellcastingSheet.pdf", spellcastingBlob)

                zip.generateAsync({type:"blob"}).then((blob) => {
                    saveAs(blob, "CharacterSheets.zip")
                })
            }

            function genSheetBlob(data, mimeType) {
                return new Blob([data], {
                    type: mimeType
                })
            }

            function saveAll() {
                let elements = document.querySelectorAll("[data-field-name]")
                elements.forEach(element =>  {
                    if (element.matches('[type="checkbox"]')) {
                        localStorage.setItem(element.id.replace("_img", ""), element.checked)
                    } else if (element.type == "text" || element.tagName.toLowerCase() == "textarea"){
                        localStorage.setItem(element.id.replace("_img", ""), element.value)
                    }
                })
            }
        </script>
    </head>
    <body>
        <div style="height: -webkit-fill-available; overflow: hidden;">
            <div class="container-flexsplit" id="mainContent">
                <div id="owlbear">
                    <webview id="owlbearEmbed" src="" autosize></webview>
                </div>
                <div id="characterSheets">
                    <div class="tab">
                        <button class="tablinks active" onclick="currentTab = 'characterSheet'; openTab(event, 'characterSheet');">Character Sheet</button>
                        <button class="tablinks" onclick="currentTab = 'characterDetails'; openTab(event, 'characterDetails');">Character Details</button>
                        <button class="tablinks" onclick="currentTab = 'spellcasting'; openTab(event, 'spellcasting');">Spellcasting Sheet</button>
                        <div class="halfed">
                            <button class="tablinks half-top" onclick="let zoom = parseInt(document.getElementById('characterSheet').style.zoom.replace('%', '')); if (zoom < 150) {document.getElementById('characterSheet').style.zoom = (zoom + 10) + '%'; document.getElementById('characterDetails').style.zoom = (zoom + 10) + '%'; document.getElementById('spellcasting').style.zoom = (zoom + 10) + '%'}">Zoom in</button>
                            <button class="tablinks half-bottom" onclick="let zoom = parseInt(document.getElementById('characterSheet').style.zoom.replace('%', '')); if (zoom > 50) {document.getElementById('characterSheet').style.zoom = (zoom - 10) + '%'; document.getElementById('characterDetails').style.zoom = (zoom - 10) + '%'; document.getElementById('spellcasting').style.zoom = (zoom - 10) + '%'}">Zoom out</button>
                        </div>
                    </div>
                    <div id="characterSheet" class="tabcontent" style="display: block; zoom: 100%;">
                        <form>
                            <div id="contentContainer">
                                <div id="page1" style="width: 935px; height: 1210px;" class="page">
                                    <div class="page-inner" style="width: 935px; height: 1210px;">
                                        <div id="p1" class="pageArea" style="overflow: hidden; position: relative; width: 935px; height: 1210px;margin-left:auto; margin-right:auto;">

                                            <!-- Begin page background -->
                                            <div id="pg1Overlay" style="width:100%; height:100%; position:absolute; z-index:1; background-color:rgba(0,0,0,0); -webkit-user-select: none; user-select: none;"></div>
                                            <div id="pg1" style="-webkit-user-select: none; user-select: none;"><object width="935" height="1210" data="1/1.svg" type="image/svg+xml" id="pdf1" style="width:935px; height:1210px; -moz-transform:scale(1); transform: scale(1); z-index: 0;"></object></div>
                                            <!-- End page background -->
                                                
                                            <!-- Begin text definitions (Positioned/styled in CSS) -->
                                            <div id="text_race" class="t s1">RACE</div>
                                            <div id="text_class" class="t s1">CLASS &amp; LEVEL</div>
                                            <div id="text_pname" class="t s1">PLAYER NAME</div>
                                            <div id="text_cname" class="t s1">CHARACTER NAME</div>
                                            <div id="text_background" class="t s1">BACKGROUND</div>
                                            <div id="text_xp" class="t s1">EXPERIENCE POINTS</div>
                                            <div id="text_alignment" class="t s1">ALIGNMENT</div>
                                            <div id="text_copyright1" class="t s2">TM &amp; © 2014 Wizards of the Coast LLC. Permission is granted to photocopy this document for personal use.</div>
                                            <div id="text_hpMax" class="t s3">Hit Point Maximum</div>
                                            <div id="text_str" class="t s1">Strength</div>
                                            <div id="text_dex" class="t s1">Dexterity</div>
                                            <div id="text_con" class="t s1">Constitution</div>
                                            <div id="text_int" class="t s1">Intelligence</div>
                                            <div id="text_wis" class="t s1">Wisdom</div>
                                            <div id="text_cha" class="t s1">Charisma</div>
                                            <div id="text_cp" class="t s4">CP</div>
                                            <div id="text_ep" class="t s4">EP</div>
                                            <div id="text_pp" class="t s4">PP</div>
                                            <div id="text_gp" class="t s4">GP</div>
                                            <div id="text_sp" class="t s4">SP</div>
                                            <div id="text_passive" class="t s5">PASSIVE WISDOM (PERCEPTION)</div>
                                            <div id="text_equipment" class="t s6">EQUIPMENT</div>
                                            <div id="text_profs" class="t s6">OTHER PROFICIENCIES &amp; LANGUAGES</div>
                                            <div id="text_atk" class="t s6">ATTACKS &amp; SPELLCASTING</div>
                                            <div id="text_features" class="t s6">FEATURES &amp; TRAITS</div>
                                            <div id="text_arcobatics" class="t s1">Acrobatics </div>
                                            <div id="text_dex2" class="t s7">(Dex)</div>
                                            <div id="text_animal" class="t s1">Animal Handling </div>
                                            <div id="text_wis2" class="t s7">(Wis)</div>
                                            <div id="text_arcana" class="t s1">Arcana </div>
                                            <div id="text_int2" class="t s7">(Int)</div>
                                            <div id="text_athletics" class="t s1">Athletics </div>
                                            <div id="text_str2" class="t s7">(Str)</div>
                                            <div id="text_deception" class="t s1">Deception </div>
                                            <div id="text_cha2" class="t s7">(Cha)</div>
                                            <div id="text_history" class="t s1">History </div>
                                            <div id="text_int3" class="t s7">(Int)</div>
                                            <div id="text_insight" class="t s1">Insight </div>
                                            <div id="text_wis3" class="t s7">(Wis)</div>
                                            <div id="text_intimidation" class="t s1">Intimidation </div>
                                            <div id="text_cha3" class="t s7">(Cha)</div>
                                            <div id="text_investigation" class="t s1">Investigation </div>
                                            <div id="text_int4" class="t s7">(Int)</div>
                                            <div id="text_medicine" class="t s1">Medicine </div>
                                            <div id="text_wis4" class="t s7">(Wis)</div>
                                            <div id="text_nature" class="t s1">Nature </div>
                                            <div id="text_int5" class="t s7">(Int)</div>
                                            <div id="text_perception" class="t s1">Perception </div>
                                            <div id="text_wis5" class="t s7">(Wis)</div>
                                            <div id="text_performance" class="t s1">Performance </div>
                                            <div id="text_cha4" class="t s7">(Cha)</div>
                                            <div id="text_persuasion" class="t s1">Persuasion </div>
                                            <div id="text_cha5" class="t s7">(Cha)</div>
                                            <div id="text_religion" class="t s1">Religion </div>
                                            <div id="text_int6" class="t s7">(Int)</div>
                                            <div id="text_sleightOfHand" class="t s1">Sleight of Hand </div>
                                            <div id="text_dex3" class="t s7">(Dex)</div>
                                            <div id="text_stealth" class="t s1">Stealth </div>
                                            <div id="text_dex4" class="t s7">(Dex)</div>
                                            <div id="text_survival" class="t s1">Survival </div>
                                            <div id="text_wis6" class="t s7">(Wis)</div>
                                            <div id="text_deathSaves" class="t s5">DEATH SAVES</div>
                                            <div id="text_hitDice" class="t s5">HIT DICE</div>
                                            <div id="text_weapon_name" class="t s4">NAME</div>
                                            <div id="text_atkBonus" class="t s4">ATK BONUS</div>
                                            <div id="text_damage" class="t s4">DAMAGE/TYPE</div>
                                            <div id="text_total" class="t s3">Total</div>
                                            <div id="text_successes" class="t s5">SUCCESSES</div>
                                            <div id="text_failures" class="t s5">FAILURES</div>
                                            <div id="text_ideals" class="t s5">IDEALS</div>
                                            <div id="text_bonds" class="t s5">BONDS</div>
                                            <div id="text_flaws" class="t s5">FLAWS</div>
                                            <div id="text_traits" class="t s5">PERSONALITY TRAITS</div>
                                            <div id="text_armor" class="t s6">ARMOR</div>
                                            <div id="text_class2" class="t s6">CLASS</div>
                                            <div id="text_hpCurrent" class="t s6">CURRENT HIT POINTS</div>
                                            <div id="text_hpTemp" class="t s6">TEMPORARY HIT POINTS</div>
                                            <div id="text_initiative" class="t s6">INITIATIVE</div>
                                            <div id="text_speed" class="t s6">SPEED</div>
                                            <div id="text_profBonus" class="t s8">PROFICIENCY BONUS</div>
                                            <div id="text_str3" class="t s6">STRENGTH</div>
                                            <div id="text_dex5" class="t s6">DEXTERITY</div>
                                            <div id="text_con2" class="t s6">CONSTITUTION</div>
                                            <div id="text_int7" class="t s6">INTELLIGENCE</div>
                                            <div id="text_wis7" class="t s6">WISDOM</div>
                                            <div id="text_cha6" class="t s6">CHARISMA</div>
                                            <div id="text_saves" class="t s6">SAVING THROWS</div>
                                            <div id="text_inspiration" class="t s8">INSPIRATION</div>
                                            <div id="text_skills" class="t s6">SKILLS</div>
                                            <!-- End text definitions -->
                                                
                                            <!-- Begin Form Data -->
                                            <input id="class" type="text" tabindex="1" value="" data-objref="2958 0 R" data-field-name="ClassLevel" onblur="onCharacterBlurEvent(event);" ondrop="return false;"/>
                                            <input id="background" type="text" tabindex="2" value="" data-objref="2959 0 R" data-field-name="Background" onblur="onCharacterBlurEvent(event);" ondrop="return false;"/>
                                            <input id="playername" type="text" tabindex="3" value="" data-objref="2960 0 R" data-field-name="PlayerName" onblur="onCharacterBlurEvent(event);" ondrop="return false;"/>
                                            <input id="charactername" type="text" tabindex="4" value="" data-objref="2961 0 R" data-field-name="CharacterName" onblur="onCharacterBlurEvent(event);" ondrop="return false;"/>
                                            <input id="race" type="text" tabindex="5" value="" data-objref="2962 0 R" data-field-name="Race " onblur="onCharacterBlurEvent(event);" ondrop="return false;"/>
                                            <input id="alignment" type="text" tabindex="6" value="" data-objref="2963 0 R" data-field-name="Alignment" onblur="onCharacterBlurEvent(event);" ondrop="return false;"/>
                                            <input id="xp" type="text" tabindex="7" value="" data-objref="2964 0 R" data-field-name="XP" onblur="onCharacterBlurEvent(event);" ondrop="return false;"/>
                                            <input id="inspiration" type="text" tabindex="8" value="" data-objref="2965 0 R" data-field-name="Inspiration" onblur="onCharacterBlurEvent(event);" ondrop="return false;"/>
                                            <input id="strMod" type="text" tabindex="9" value="" data-objref="2966 0 R" data-field-name="STR" onblur="onCharacterBlurEvent(event);" ondrop="return false;"/>
                                            <input id="proficiency" type="text" tabindex="10" value="" data-objref="2967 0 R" data-field-name="ProfBonus" onblur="onCharacterBlurEvent(event);" ondrop="return false;"/>
                                            <input id="ac" type="text" tabindex="11" value="" data-objref="2968 0 R" data-field-name="AC" onblur="onCharacterBlurEvent(event);" ondrop="return false;"/>
                                            <input id="initiative" type="text" tabindex="12" value="" data-objref="2969 0 R" data-field-name="Initiative" onblur="onCharacterBlurEvent(event);" ondrop="return false;"/>
                                            <input id="speed" type="text" tabindex="13" value="" data-objref="2970 0 R" data-field-name="Speed" onblur="onCharacterBlurEvent(event);" ondrop="return false;"/>
                                            <textarea id="traits" tabindex="14" data-objref="2971 0 R" data-field-name="PersonalityTraits " onblur="onCharacterBlurEvent(event);" ondrop="return false;"></textarea>
                                            <input id="str" type="text" tabindex="15" value="" data-objref="2972 0 R" data-field-name="STRmod" onblur="onCharacterBlurEvent(event);" ondrop="return false;"/>
                                            <input id="strSave" type="text" tabindex="16" value="" data-objref="2974 0 R" data-field-name="ST Strength" onblur="onCharacterBlurEvent(event);" ondrop="return false;"/>
                                            <input id="dexMod" type="text" tabindex="17" value="" data-objref="2975 0 R" data-field-name="DEX" onblur="onCharacterBlurEvent(event);" ondrop="return false;"/>
                                            <textarea id="ideals" tabindex="18" data-objref="2977 0 R" data-field-name="Ideals" onblur="onCharacterBlurEvent(event);" ondrop="return false;"></textarea>
                                            <input id="dex" type="text" tabindex="19" value="" data-objref="2978 0 R" data-field-name="DEXmod " onblur="onCharacterBlurEvent(event);" ondrop="return false;"/>
                                            <textarea id="bonds" tabindex="20" data-objref="2980 0 R" data-field-name="Bonds" onblur="onCharacterBlurEvent(event);" ondrop="return false;"></textarea>
                                            <input id="conMod" type="text" tabindex="21" value="" data-objref="2981 0 R" data-field-name="CON" onblur="onCharacterBlurEvent(event);" ondrop="return false;"/>
                                            <input id="hitDiceTotal" type="text" tabindex="22" value="" data-objref="2982 0 R" data-field-name="HDTotal" onblur="onCharacterBlurEvent(event);" ondrop="return false;"/>
                                            <input id="success1" type="checkbox" tabindex="23" data-objref="2983 0 R" data-field-name="Check Box 12" imageName="1/form/2983 0 R" images="110100" onchange="onCharacterCheck(event);"/>
                                            <input id="success2" type="checkbox" tabindex="24" data-objref="2985 0 R" data-field-name="Check Box 13" imageName="1/form/2985 0 R" images="110100" onchange="onCharacterCheck(event);"/>
                                            <input id="success3" type="checkbox" tabindex="25" data-objref="2987 0 R" data-field-name="Check Box 14" imageName="1/form/2987 0 R" images="110100" onchange="onCharacterCheck(event);"/>
                                            <input id="con" type="text" tabindex="26" value="" data-objref="2989 0 R" data-field-name="CONmod" onblur="onCharacterBlurEvent(event);" ondrop="return false;"/>
                                            <input id="failure1" type="checkbox" tabindex="27" data-objref="2990 0 R" data-field-name="Check Box 15" imageName="1/form/2990 0 R" images="110100" onchange="onCharacterCheck(event);"/>
                                            <input id="failure2" type="checkbox" tabindex="28" data-objref="2992 0 R" data-field-name="Check Box 16" imageName="1/form/2992 0 R" images="110100" onchange="onCharacterCheck(event);"/>
                                            <input id="failure3" type="checkbox" tabindex="29" data-objref="2994 0 R" data-field-name="Check Box 17" imageName="1/form/2994 0 R" images="110100" onchange="onCharacterCheck(event);"/>
                                            <input id="hitDice" type="text" tabindex="30" value="" data-objref="2996 0 R" data-field-name="HD" onblur="onCharacterBlurEvent(event);" ondrop="return false;"/>
                                            <textarea id="flaws" tabindex="31" data-objref="2997 0 R" data-field-name="Flaws" onblur="onCharacterBlurEvent(event);" ondrop="return false;"></textarea>
                                            <input id="intMod" type="text" tabindex="32" value="" data-objref="2998 0 R" data-field-name="INT" onblur="onCharacterBlurEvent(event);" ondrop="return false;"/>
                                            <input id="dexSave" type="text" tabindex="33" value="" data-objref="2999 0 R" data-field-name="ST Dexterity" onblur="onCharacterBlurEvent(event);" ondrop="return false;"/>
                                            <input id="conSave" type="text" tabindex="34" value="" data-objref="3000 0 R" data-field-name="ST Constitution" onblur="onCharacterBlurEvent(event);" ondrop="return false;"/>
                                            <input id="intSave" type="text" tabindex="35" value="" data-objref="3001 0 R" data-field-name="ST Intelligence" onblur="onCharacterBlurEvent(event);" ondrop="return false;"/>
                                            <input id="wisSave" type="text" tabindex="36" value="" data-objref="3002 0 R" data-field-name="ST Wisdom" onblur="onCharacterBlurEvent(event);" ondrop="return false;"/>
                                            <input id="chaSave" type="text" tabindex="37" value="" data-objref="3003 0 R" data-field-name="ST Charisma" onblur="onCharacterBlurEvent(event);" ondrop="return false;"/>
                                            <input id="acrobatics" type="text" tabindex="38" value="" data-objref="3004 0 R" data-field-name="Acrobatics" onblur="onCharacterBlurEvent(event);" ondrop="return false;"/>
                                            <input id="animal" type="text" tabindex="39" value="" data-objref="3005 0 R" data-field-name="Animal" onblur="onCharacterBlurEvent(event);" ondrop="return false;"/>
                                            <input id="athletics" type="text" tabindex="40" value="" data-objref="3006 0 R" data-field-name="Athletics" onblur="onCharacterBlurEvent(event);" ondrop="return false;"/>
                                            <input id="deception" type="text" tabindex="41" value="" data-objref="3007 0 R" data-field-name="Deception " onblur="onCharacterBlurEvent(event);" ondrop="return false;"/>
                                            <input id="history" type="text" tabindex="42" value="" data-objref="3008 0 R" data-field-name="History " onblur="onCharacterBlurEvent(event);" ondrop="return false;"/>
                                            <input id="wpnName1" type="text" tabindex="43" value="" data-objref="3023 0 R" data-field-name="Wpn Name" onblur="onCharacterBlurEvent(event);" ondrop="return false;"/>
                                            <input id="wpnAtk1" type="text" tabindex="44" value="" data-objref="3024 0 R" data-field-name="Wpn1 AtkBonus" onblur="onCharacterBlurEvent(event);" ondrop="return false;"/>
                                            <input id="wpnDmg1" type="text" tabindex="45" value="" data-objref="3025 0 R" data-field-name="Wpn1 Damage" onblur="onCharacterBlurEvent(event);" ondrop="return false;"/>
                                            <input id="insight" type="text" tabindex="46" value="" data-objref="3009 0 R" data-field-name="Insight" onblur="onCharacterBlurEvent(event);" ondrop="return false;"/>
                                            <input id="intimidation" type="text" tabindex="47" value="" data-objref="3010 0 R" data-field-name="Intimidation" onblur="onCharacterBlurEvent(event);" ondrop="return false;"/>
                                            <input id="wpnName2" type="text" tabindex="48" value="" data-objref="3027 0 R" data-field-name="Wpn Name 2" onblur="onCharacterBlurEvent(event);" ondrop="return false;"/>
                                            <input id="wpnAtk2" type="text" tabindex="49" value="" data-objref="3028 0 R" data-field-name="Wpn2 AtkBonus " onblur="onCharacterBlurEvent(event);" ondrop="return false;"/>
                                            <input id="wpnName3" type="text" tabindex="50" value="" data-objref="3032 0 R" data-field-name="Wpn Name 3" onblur="onCharacterBlurEvent(event);" ondrop="return false;"/>
                                            <input id="wpnAtk3" type="text" tabindex="51" value="" data-objref="3033 0 R" data-field-name="Wpn3 AtkBonus  " onblur="onCharacterBlurEvent(event);" ondrop="return false;"/>
                                            <input id="strSaveProf" type="checkbox" tabindex="52" data-objref="3011 0 R" data-field-name="Check Box 11" imageName="1/form/3011 0 R" images="110100" onchange="onCharacterCheck(event);"/>
                                            <input id="dexSaveProf" type="checkbox" tabindex="53" data-objref="3013 0 R" data-field-name="Check Box 18" imageName="1/form/3013 0 R" images="110100" onchange="onCharacterCheck(event);"/>
                                            <input id="conSaveProf" type="checkbox" tabindex="54" data-objref="3015 0 R" data-field-name="Check Box 19" imageName="1/form/3015 0 R" images="110100" onchange="onCharacterCheck(event);"/>
                                            <input id="intSaveProf" type="checkbox" tabindex="55" data-objref="3017 0 R" data-field-name="Check Box 20" imageName="1/form/3017 0 R" images="110100" onchange="onCharacterCheck(event);"/>
                                            <input id="wisSaveProf" type="checkbox" tabindex="56" data-objref="3019 0 R" data-field-name="Check Box 21" imageName="1/form/3019 0 R" images="110100" onchange="onCharacterCheck(event);"/>
                                            <input id="chaSaveProf" type="checkbox" tabindex="57" data-objref="3021 0 R" data-field-name="Check Box 22" imageName="1/form/3021 0 R" images="110100" onchange="onCharacterCheck(event);"/>
                                            <input id="int" type="text" tabindex="58" value="" data-objref="3026 0 R" data-field-name="INTmod" onblur="onCharacterBlurEvent(event);" ondrop="return false;"/>
                                            <input id="wpnDmg2" type="text" tabindex="59" value="" data-objref="3029 0 R" data-field-name="Wpn2 Damage " onblur="onCharacterBlurEvent(event);" ondrop="return false;"/>
                                            <input id="investigation" type="text" tabindex="60" value="" data-objref="3030 0 R" data-field-name="Investigation " onblur="onCharacterBlurEvent(event);" ondrop="return false;"/>
                                            <input id="wisMod" type="text" tabindex="61" value="" data-objref="3031 0 R" data-field-name="WIS" onblur="onCharacterBlurEvent(event);" ondrop="return false;"/>
                                            <input id="arcana" type="text" tabindex="62" value="" data-objref="3034 0 R" data-field-name="Arcana" onblur="onCharacterBlurEvent(event);" ondrop="return false;"/>
                                            <input id="perception" type="text" tabindex="63" value="" data-objref="3036 0 R" data-field-name="Perception " onblur="onCharacterBlurEvent(event);" ondrop="return false;"/>
                                            <input id="wis" type="text" tabindex="64" value="" data-objref="3037 0 R" data-field-name="WISmod" onblur="onCharacterBlurEvent(event);" ondrop="return false;"/>
                                            <input id="chaMod" type="text" tabindex="65" value="" data-objref="3038 0 R" data-field-name="CHA" onblur="onCharacterBlurEvent(event);" ondrop="return false;"/>
                                            <input id="nature" type="text" tabindex="66" value="" data-objref="3039 0 R" data-field-name="Nature" onblur="onCharacterBlurEvent(event);" ondrop="return false;"/>
                                            <input id="performance" type="text" tabindex="67" value="" data-objref="3040 0 R" data-field-name="Performance" onblur="onCharacterBlurEvent(event);" ondrop="return false;"/>
                                            <input id="medicine" type="text" tabindex="68" value="" data-objref="3041 0 R" data-field-name="Medicine" onblur="onCharacterBlurEvent(event);" ondrop="return false;"/>
                                            <input id="religion" type="text" tabindex="69" value="" data-objref="3042 0 R" data-field-name="Religion" onblur="onCharacterBlurEvent(event);" ondrop="return false;"/>
                                            <input id="stealth" type="text" tabindex="70" value="" data-objref="3043 0 R" data-field-name="Stealth " onblur="onCharacterBlurEvent(event);" ondrop="return false;"/>
                                            <input id="acrobaticsProf" type="checkbox" tabindex="71" data-objref="3044 0 R" data-field-name="Check Box 23" imageName="1/form/3044 0 R" images="110100" onchange="onCharacterCheck(event);"/>
                                            <input id="animalProf" type="checkbox" tabindex="72" data-objref="3046 0 R" data-field-name="Check Box 24" imageName="1/form/3046 0 R" images="110100" onchange="onCharacterCheck(event);"/>
                                            <input id="arcanaProf" type="checkbox" tabindex="73" data-objref="3048 0 R" data-field-name="Check Box 25" imageName="1/form/3048 0 R" images="110100" onchange="onCharacterCheck(event);"/>
                                            <input id="athleticsProf" type="checkbox" tabindex="74" data-objref="3050 0 R" data-field-name="Check Box 26" imageName="1/form/3050 0 R" images="110100" onchange="onCharacterCheck(event);"/>
                                            <input id="deceptionProf" type="checkbox" tabindex="75" data-objref="3052 0 R" data-field-name="Check Box 27" imageName="1/form/3052 0 R" images="110100" onchange="onCharacterCheck(event);"/>
                                            <input id="historyProf" type="checkbox" tabindex="76" data-objref="3054 0 R" data-field-name="Check Box 28" imageName="1/form/3054 0 R" images="110100" onchange="onCharacterCheck(event);"/>
                                            <input id="insightProf" type="checkbox" tabindex="77" data-objref="3056 0 R" data-field-name="Check Box 29" imageName="1/form/3056 0 R" images="110100" onchange="onCharacterCheck(event);"/>
                                            <input id="intimidationProf" type="checkbox" tabindex="78" data-objref="3058 0 R" data-field-name="Check Box 30" imageName="1/form/3058 0 R" images="110100" onchange="onCharacterCheck(event);"/>
                                            <input id="investigationProf" type="checkbox" tabindex="79" data-objref="3060 0 R" data-field-name="Check Box 31" imageName="1/form/3060 0 R" images="110100" onchange="onCharacterCheck(event);"/>
                                            <input id="medicineProf" type="checkbox" tabindex="80" data-objref="3062 0 R" data-field-name="Check Box 32" imageName="1/form/3062 0 R" images="110100" onchange="onCharacterCheck(event);"/>
                                            <input id="natureProf" type="checkbox" tabindex="81" data-objref="3064 0 R" data-field-name="Check Box 33" imageName="1/form/3064 0 R" images="110100" onchange="onCharacterCheck(event);"/>
                                            <input id="perceptionProf" type="checkbox" tabindex="82" data-objref="3066 0 R" data-field-name="Check Box 34" imageName="1/form/3066 0 R" images="110100" onchange="onCharacterCheck(event);"/>
                                            <input id="performanceProf" type="checkbox" tabindex="83" data-objref="3068 0 R" data-field-name="Check Box 35" imageName="1/form/3068 0 R" images="110100" onchange="onCharacterCheck(event);"/>
                                            <input id="persuasionProf" type="checkbox" tabindex="84" data-objref="3070 0 R" data-field-name="Check Box 36" imageName="1/form/3070 0 R" images="110100" onchange="onCharacterCheck(event);"/>
                                            <input id="religionProf" type="checkbox" tabindex="85" data-objref="3072 0 R" data-field-name="Check Box 37" imageName="1/form/3072 0 R" images="110100" onchange="onCharacterCheck(event);"/>
                                            <input id="sleightOfHandProf" type="checkbox" tabindex="86" data-objref="3074 0 R" data-field-name="Check Box 38" imageName="1/form/3074 0 R" images="110100" onchange="onCharacterCheck(event);"/>
                                            <input id="stealthProf" type="checkbox" tabindex="87" data-objref="3076 0 R" data-field-name="Check Box 39" imageName="1/form/3076 0 R" images="110100" onchange="onCharacterCheck(event);"/>
                                            <input id="survivalProf" type="checkbox" tabindex="88" data-objref="3078 0 R" data-field-name="Check Box 40" imageName="1/form/3078 0 R" images="110100" onchange="onCharacterCheck(event);"/>
                                            <input id="persuasion" type="text" tabindex="89" value="" data-objref="3080 0 R" data-field-name="Persuasion" onblur="onCharacterBlurEvent(event);" ondrop="return false;"/>
                                            <input id="hpMax" type="text" tabindex="90" value="" data-objref="2973 0 R" data-field-name="HPMax" onblur="onCharacterBlurEvent(event);" ondrop="return false;"/>
                                            <input id="hpCurrent" type="text" tabindex="91" value="" data-objref="2976 0 R" data-field-name="HPCurrent" onblur="onCharacterBlurEvent(event);" ondrop="return false;"/>
                                            <input id="hpTemp" type="text" tabindex="92" value="" data-objref="2979 0 R" data-field-name="HPTemp" onblur="onCharacterBlurEvent(event);" ondrop="return false;"/>
                                            <input id="wpnDmg3" type="text" tabindex="93" value="" data-objref="3035 0 R" data-field-name="Wpn3 Damage " onblur="onCharacterBlurEvent(event);" ondrop="return false;"/>
                                            <input id="sleightOfHand" type="text" tabindex="94" value="" data-objref="3081 0 R" data-field-name="SleightofHand" onblur="onCharacterBlurEvent(event);" ondrop="return false;"/>
                                            <input id="cha" type="text" tabindex="95" value="" data-objref="3082 0 R" data-field-name="CHamod" onblur="onCharacterBlurEvent(event);" ondrop="return false;"/>
                                            <input id="survival" type="text" tabindex="96" value="" data-objref="3083 0 R" data-field-name="Survival" onblur="onCharacterBlurEvent(event);" ondrop="return false;"/>
                                            <textarea id="attacksSpells" tabindex="97" data-objref="3084 0 R" data-field-name="AttacksSpellcasting" onblur="onCharacterBlurEvent(event);" ondrop="return false;"></textarea>
                                            <input id="passivePerception" type="text" tabindex="98" value="" data-objref="3085 0 R" data-field-name="Passive" onblur="onCharacterBlurEvent(event);" ondrop="return false;"/>
                                            <input id="cp" type="text" tabindex="99" value="" data-objref="3086 0 R" data-field-name="CP" onblur="onCharacterBlurEvent(event);" ondrop="return false;"/>
                                            <textarea id="langs" tabindex="100" data-objref="3087 0 R" data-field-name="ProficienciesLang" onblur="onCharacterBlurEvent(event);" ondrop="return false;"></textarea>
                                            <input id="sp" type="text" tabindex="101" value="" data-objref="3088 0 R" data-field-name="SP" onblur="onCharacterBlurEvent(event);" ondrop="return false;"/>
                                            <input id="ep" type="text" tabindex="102" value="" data-objref="3089 0 R" data-field-name="EP" onblur="onCharacterBlurEvent(event);" ondrop="return false;"/>
                                            <input id="gp" type="text" tabindex="103" value="" data-objref="3090 0 R" data-field-name="GP" onblur="onCharacterBlurEvent(event);" ondrop="return false;"/>
                                            <input id="pp" type="text" tabindex="104" value="" data-objref="3091 0 R" data-field-name="PP" onblur="onCharacterBlurEvent(event);" ondrop="return false;"/>
                                            <textarea id="equipment" tabindex="105" data-objref="3092 0 R" data-field-name="Equipment" onblur="onCharacterBlurEvent(event);" ondrop="return false;"></textarea>
                                            <textarea id="features" tabindex="106" data-objref="3093 0 R" data-field-name="Features and Traits" onblur="onCharacterBlurEvent(event);" ondrop="return false;"></textarea>
                                            <!-- End Form Data -->

                                        </div>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                    <div id="characterDetails" class="tabcontent" style="zoom: 100%;">                      
                        <form>
                            <div id="contentContainer">
                                <div id="page1" style="width: 935px; height: 1210px; margin-top:20px;" class="page">
                                    <div class="page-inner" style="width: 935px; height: 1210px;">
                                        <div id="p1" class="pageArea" style="overflow: hidden; position: relative; width: 935px; height: 1210px; margin-top:auto; margin-left:auto; margin-right:auto; background-color: white;">
                                        
                                            <!-- Begin page background -->
                                            <div id="pg1Overlay" style="width:100%; height:100%; position:absolute; z-index:1; background-color:rgba(0,0,0,0); -webkit-user-select: none; user-select: none;"></div>
                                            <div id="pg1" style="-webkit-user-select: none; user-select: none;"><object width="935" height="1210" data="2/1.svg" type="image/svg+xml" id="pdf1" style="width:935px; height:1210px; -moz-transform:scale(1); transform: scale(1); z-index: 0;"></object></div>
                                            <!-- End page background -->
                                            
                                            <!-- Begin text definitions (Positioned/styled in CSS) -->
                                            <div id="text_cname2" class="t s1_2">CHARACTER NAME</div>
                                            <div id="text_eyes" class="t s1_2">EYES</div>
                                            <div id="text_age" class="t s1_2">AGE</div>
                                            <div id="text_weight" class="t s1_2">WEIGHT</div>
                                            <div id="text_height" class="t s1_2">HEIGHT</div>
                                            <div id="text_hair" class="t s1_2">HAIR</div>
                                            <div id="text_skin" class="t s1_2">SKIN</div>
                                            <div id="text_name" class="t s2_2">NAME</div>
                                            <div id="text_treasure" class="t s3_2">TREASURE</div>
                                            <div id="text_backstory" class="t s3_2">CHARACTER BACKSTORY</div>
                                            <div id="text_appearance" class="t s3_2">CHARACTER APPEARANCE</div>
                                            <div id="text_additionalFeatures" class="t s3_2">ADDITIONAL FEATURES &amp; TRAITS</div>
                                            <div id="text_allies" class="t s3_2">ALLIES &amp; ORGANIZATIONS</div>
                                            <div id="text_symbol" class="t s4_2">SYMBOL</div>
                                            <div id="text_copyright2" class="t s5_2">TM &amp; © 2014 Wizards of the Coast LLC. Permission is granted to photocopy this document for personal use.</div>
                                            <!-- End text definitions -->
                                            
                                            <!-- Begin Form Data -->
                                            <input id="cname2" type="text" tabindex="1" value="" data-objref="270 0 R" data-field-name="CharacterName 2" onblur="onDetailsBlurEvent(event);" ondrop="return false;"/>
                                            <input id="age" type="text" tabindex="2" value="" data-objref="271 0 R" data-field-name="Age" onblur="onDetailsBlurEvent(event);" ondrop="return false;"/>
                                            <input id="height" type="text" tabindex="3" value="" data-objref="272 0 R" data-field-name="Height" onblur="onDetailsBlurEvent(event);" ondrop="return false;"/>
                                            <input id="weight" type="text" tabindex="4" value="" data-objref="273 0 R" data-field-name="Weight" onblur="onDetailsBlurEvent(event);" ondrop="return false;"/>
                                            <input id="eyes" type="text" tabindex="5" value="" data-objref="274 0 R" data-field-name="Eyes" onblur="onDetailsBlurEvent(event);" ondrop="return false;"/>
                                            <input id="skin" type="text" tabindex="6" value="" data-objref="275 0 R" data-field-name="Skin" onblur="onDetailsBlurEvent(event);" ondrop="return false;"/>
                                            <input id="hair" type="text" tabindex="7" value="" data-objref="276 0 R" data-field-name="Hair" onblur="onDetailsBlurEvent(event);" ondrop="return false;"/>
                                            <input id="image" type="button" tabindex="8" data-objref="277 0 R" data-field-name="CHARACTER IMAGE"/>
                                            <input id="factionImage" type="button" tabindex="9" data-objref="278 0 R" data-field-name="Faction Symbol Image"/>
                                            <textarea id="allies" tabindex="10" data-objref="279 0 R" data-field-name="Allies" onblur="onDetailsBlurEvent(event);" ondrop="return false;"></textarea>
                                            <input id="factionName" type="text" tabindex="11" value="" data-objref="280 0 R" data-field-name="FactionName" onblur="onDetailsBlurEvent(event);" ondrop="return false;"/>
                                            <textarea id="backstory" tabindex="12" data-objref="281 0 R" data-field-name="Backstory" onblur="onDetailsBlurEvent(event);" ondrop="return false;"></textarea>
                                            <textarea id="additionalFeatures" tabindex="13" data-objref="282 0 R" data-field-name="Feat+Traits" onblur="onDetailsBlurEvent(event);" ondrop="return false;"></textarea>
                                            <textarea id="treasure" tabindex="14" data-objref="283 0 R" data-field-name="Treasure" onblur="onDetailsBlurEvent(event);" ondrop="return false;"></textarea>
                                            <input id="image2" type="button" tabindex="15" data-objref="284 0 R" data-field-name="CHARACTER IMAGE"/>
                                            <input id="image3" type="button" tabindex="16" data-objref="285 0 R" data-field-name="CHARACTER IMAGE"/>
                                            <!-- End Form Data -->
                                        
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                    <div id="spellcasting" class="tabcontent" style="zoom: 100%;">
                        <form>
                            <div id="contentContainer">
                                <div id="page1" style="width: 935px; height: 1210px; margin-left: auto; margin-right: auto;" class="page">
                                    <div class="page-inner" style="width: 935px; height: 1210px;">
                                        <div id="p1" class="pageArea" style="overflow: hidden; position: relative; width: 935px; height: 1210px; margin-top:auto; margin-left:auto; margin-right:auto; background-color: white;">

                                            <!-- Begin page background -->
                                            <div id="pg1Overlay" style="width:100%; height:100%; position:absolute; z-index:1; background-color:rgba(0,0,0,0); -webkit-user-select: none; user-select: none;"></div>
                                            <div id="pg1" style="-webkit-user-select: none; user-select: none;"><object width="935" height="1210" data="3/1.svg" type="image/svg+xml" id="pdf1" style="width:935px; height:1210px; -moz-transform:scale(1); transform: scale(1); z-index: 0;"></object></div>
                                            <!-- End page background -->
                                            
                                            <!-- Begin text definitions (Positioned/styled in CSS) -->
                                            <div id="text_copyright3" class="t s1_3">TM &amp; © 2014 Wizards of the Coast LLC. Permission is granted to photocopy this document for personal use.</div>
                                            <div id="text_spellcasting" class="t s2_3">SPELLCASTING</div>
                                            <div id="text_spellClass" class="t s2_3">CLASS</div>
                                            <div id="text_spellsKnown" class="t m0_1_3 s3_3">SPELLS KNOWN</div>
                                            <div id="text_spellName" class="t s4_3">SPELL NAME</div>
                                            <div id="text_p" class="t m1_1_3 s5_3">P</div>
                                            <div id="text_r" class="t m2_1_3 s5_3">R</div>
                                            <div id="text_e" class="t m3_1_3 s5_3">E</div>
                                            <div id="text_p2" class="t m4_1_3 s5_3">P</div>
                                            <div id="text_a" class="t m5_1_3 s5_3">A</div>
                                            <div id="text_r2" class="t m6_1_3 s5_3">R</div>
                                            <div id="text_e2" class="t m7_1_3 s5_3">E</div>
                                            <div id="text_d" class="t m8_1_3 s5_3">D</div>
                                            <div id="text_spell" class="t s3_3">SPELL</div>
                                            <div id="text_lvl" class="t s3_3">LEVEL</div>
                                            <div id="text_slotsExpended" class="t s3_3">SLOTS EXPENDED</div>
                                            <div id="text_slotsTotal" class="t s3_3">SLOTS TOTAL</div>
                                            <div id="text_n1" class="t s6_3">1</div>
                                            <div id="text_n0" class="t s6_3">0</div>
                                            <div id="text_n2" class="t s6_3">2</div>
                                            <div id="text_n3" class="t s6_3">3</div>
                                            <div id="text_n6" class="t s6_3">6</div>
                                            <div id="text_n7" class="t s6_3">7</div>
                                            <div id="text_n8" class="t s6_3">8</div>
                                            <div id="text_n9" class="t s6_3">9</div>
                                            <div id="text_n4" class="t s6_3">4</div>
                                            <div id="text_n5" class="t s6_3">5</div>
                                            <div id="text_spellcasting2" class="t s2_3">SPELLCASTING</div>
                                            <div id="text_spellAbility" class="t s2_3">ABILITY</div>
                                            <div id="text_spellSave" class="t s2_3">SPELL SAVE DC</div>
                                            <div id="text_spellAtk" class="t s2_3">SPELL ATTACK</div>
                                            <div id="text_spellBonus" class="t s2_3">BONUS</div>
                                            <div id="text_spellCantrips" class="t s7_3">CANTRIPS</div>
                                            <!-- End text definitions -->
                                            
                                            <!-- Begin Form Data -->
                                            <input id="spellClass" type="text" tabindex="1" value="" data-objref="1111 0 R" data-field-name="Spellcasting Class 2" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;"/>
                                            <input id="spellAbility" type="text" tabindex="2" value="" data-objref="1112 0 R" data-field-name="SpellcastingAbility 2" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;"/>
                                            <input id="spellSave" type="text" tabindex="3" value="" data-objref="1113 0 R" data-field-name="SpellSaveDC  2" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;"/>
                                            <input id="SpellAtk" type="text" tabindex="4" value="" data-objref="1114 0 R" data-field-name="SpellAtkBonus 2" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;"/>
                                            <input id="slots1_1" type="text" tabindex="13" value="" data-objref="1115 0 R" data-field-name="SlotsTotal 19" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;"/>
                                            <input id="slots1_2" type="text" tabindex="14" value="" data-objref="1116 0 R" data-field-name="SlotsRemaining 19" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;"/>
                                            <input id="spell0_1" type="text" tabindex="5" value="" data-objref="1117 0 R" data-field-name="Spells 1014" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;" ondblclick="showSpellInfoRight(this)"/>
                                            <input id="spell0_2" type="text" tabindex="6" value="" data-objref="1119 0 R" data-field-name="Spells 1016" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;" ondblclick="showSpellInfoRight(this)"/>
                                            <input id="spell0_3" type="text" tabindex="7" value="" data-objref="1120 0 R" data-field-name="Spells 1017" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;" ondblclick="showSpellInfoRight(this)"/>
                                            <input id="spell0_4" type="text" tabindex="8" value="" data-objref="1121 0 R" data-field-name="Spells 1018" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;" ondblclick="showSpellInfoRight(this)"/>
                                            <input id="spell0_5" type="text" tabindex="9" value="" data-objref="1122 0 R" data-field-name="Spells 1019" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;" ondblclick="showSpellInfoRight(this)"/>
                                            <input id="spell0_6" type="text" tabindex="10" value="" data-objref="1123 0 R" data-field-name="Spells 1020" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;" ondblclick="showSpellInfoRight(this)"/>
                                            <input id="spell0_7" type="text" tabindex="11" value="" data-objref="1124 0 R" data-field-name="Spells 1021" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;" ondblclick="showSpellInfoRight(this)"/>
                                            <input id="spell0_8" type="text" tabindex="12" value="" data-objref="1125 0 R" data-field-name="Spells 1022" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;" ondblclick="showSpellInfoRight(this)"/>
                                            <input id="spell3_2Prep" type="checkbox" tabindex="15" data-objref="1126 0 R" data-field-name="Check Box 314" imageName="3/form/1126 0 R" images="110100" onchange="onSpellcastingCheck(event);"/>
                                            <input id="spell3_3Prep" type="checkbox" tabindex="16" data-objref="1128 0 R" data-field-name="Check Box 3031" imageName="3/form/1128 0 R" images="110100" onchange="onSpellcastingCheck(event);"/>
                                            <input id="spell3_4Prep" type="checkbox" tabindex="17" data-objref="1129 0 R" data-field-name="Check Box 3032" imageName="3/form/1129 0 R" images="110100" onchange="onSpellcastingCheck(event);"/>
                                            <input id="spell3_5Prep" type="checkbox" tabindex="18" data-objref="1130 0 R" data-field-name="Check Box 3033" imageName="3/form/1130 0 R" images="110100" onchange="onSpellcastingCheck(event);"/>
                                            <input id="spell3_6Prep" type="checkbox" tabindex="19" data-objref="1131 0 R" data-field-name="Check Box 3034" imageName="3/form/1131 0 R" images="110100" onchange="onSpellcastingCheck(event);"/>
                                            <input id="spell3_7Prep" type="checkbox" tabindex="20" data-objref="1132 0 R" data-field-name="Check Box 3035" imageName="3/form/1132 0 R" images="110100" onchange="onSpellcastingCheck(event);"/>
                                            <input id="spell3_8Prep" type="checkbox" tabindex="21" data-objref="1133 0 R" data-field-name="Check Box 3036" imageName="3/form/1133 0 R" images="110100" onchange="onSpellcastingCheck(event);"/>
                                            <input id="spell3_9Prep" type="checkbox" tabindex="22" data-objref="1134 0 R" data-field-name="Check Box 3037" imageName="3/form/1134 0 R" images="110100" onchange="onSpellcastingCheck(event);"/>
                                            <input id="spell3_10Prep" type="checkbox" tabindex="23" data-objref="1135 0 R" data-field-name="Check Box 3038" imageName="3/form/1135 0 R" images="110100" onchange="onSpellcastingCheck(event);"/>
                                            <input id="spell3_11Prep" type="checkbox" tabindex="24" data-objref="1136 0 R" data-field-name="Check Box 3039" imageName="3/form/1136 0 R" images="110100" onchange="onSpellcastingCheck(event);"/>
                                            <input id="spell3_12Prep" type="checkbox" tabindex="25" data-objref="1137 0 R" data-field-name="Check Box 3040" imageName="3/form/1137 0 R" images="110100" onchange="onSpellcastingCheck(event);"/>
                                            <input id="spell6_1Prep" type="checkbox" tabindex="26" data-objref="1138 0 R" data-field-name="Check Box 321" imageName="3/form/1138 0 R" images="110100" onchange="onSpellcastingCheck(event);"/>
                                            <input id="spell6_2Prep" type="checkbox" tabindex="27" data-objref="1139 0 R" data-field-name="Check Box 320" imageName="3/form/1139 0 R" images="110100" onchange="onSpellcastingCheck(event);"/>
                                            <input id="spell6_3Prep" type="checkbox" tabindex="28" data-objref="1140 0 R" data-field-name="Check Box 3060" imageName="3/form/1140 0 R" images="110100" onchange="onSpellcastingCheck(event);"/>
                                            <input id="spell6_4Prep" type="checkbox" tabindex="29" data-objref="1141 0 R" data-field-name="Check Box 3061" imageName="3/form/1141 0 R" images="110100" onchange="onSpellcastingCheck(event);"/>
                                            <input id="spell6_5Prep" type="checkbox" tabindex="30" data-objref="1142 0 R" data-field-name="Check Box 3062" imageName="3/form/1142 0 R" images="110100" onchange="onSpellcastingCheck(event);"/>
                                            <input id="spell6_6Prep" type="checkbox" tabindex="31" data-objref="1143 0 R" data-field-name="Check Box 3063" imageName="3/form/1143 0 R" images="110100" onchange="onSpellcastingCheck(event);"/>
                                            <input id="spell6_7Prep" type="checkbox" tabindex="32" data-objref="1144 0 R" data-field-name="Check Box 3064" imageName="3/form/1144 0 R" images="110100" onchange="onSpellcastingCheck(event);"/>
                                            <input id="spell6_8Prep" type="checkbox" tabindex="33" data-objref="1145 0 R" data-field-name="Check Box 3065" imageName="3/form/1145 0 R" images="110100" onchange="onSpellcastingCheck(event);"/>
                                            <input id="spell6_9Prep" type="checkbox" tabindex="34" data-objref="1146 0 R" data-field-name="Check Box 3066" imageName="3/form/1146 0 R" images="110100" onchange="onSpellcastingCheck(event);"/>
                                            <input id="spell3_1Prep" type="checkbox" tabindex="35" data-objref="1147 0 R" data-field-name="Check Box 315" imageName="3/form/1147 0 R" images="110100" onchange="onSpellcastingCheck(event);"/>
                                            <input id="spell3_13Prep" type="checkbox" tabindex="36" data-objref="1148 0 R" data-field-name="Check Box 3041" imageName="3/form/1148 0 R" images="110100" onchange="onSpellcastingCheck(event);"/>
                                            <input id="spell1_1Prep" type="checkbox" tabindex="37" data-objref="1150 0 R" data-field-name="Check Box 251" imageName="3/form/1150 0 R" images="110100" onchange="onSpellcastingCheck(event);"/>
                                            <input id="spell1_2Prep" type="checkbox" tabindex="38" data-objref="1151 0 R" data-field-name="Check Box 309" imageName="3/form/1151 0 R" images="110100" onchange="onSpellcastingCheck(event);"/>
                                            <input id="spell1_3Prep" type="checkbox" tabindex="39" data-objref="1152 0 R" data-field-name="Check Box 3010" imageName="3/form/1152 0 R" images="110100" onchange="onSpellcastingCheck(event);"/>
                                            <input id="spell1_4Prep" type="checkbox" tabindex="40" data-objref="1153 0 R" data-field-name="Check Box 3011" imageName="3/form/1153 0 R" images="110100" onchange="onSpellcastingCheck(event);"/>
                                            <input id="spell1_5Prep" type="checkbox" tabindex="41" data-objref="1154 0 R" data-field-name="Check Box 3012" imageName="3/form/1154 0 R" images="110100" onchange="onSpellcastingCheck(event);"/>
                                            <input id="spell1_6Prep" type="checkbox" tabindex="42" data-objref="1155 0 R" data-field-name="Check Box 3013" imageName="3/form/1155 0 R" images="110100" onchange="onSpellcastingCheck(event);"/>
                                            <input id="spell1_7Prep" type="checkbox" tabindex="43" data-objref="1156 0 R" data-field-name="Check Box 3014" imageName="3/form/1156 0 R" images="110100" onchange="onSpellcastingCheck(event);"/>
                                            <input id="spell1_8Prep" type="checkbox" tabindex="44" data-objref="1157 0 R" data-field-name="Check Box 3015" imageName="3/form/1157 0 R" images="110100" onchange="onSpellcastingCheck(event);"/>
                                            <input id="spell1_9Prep" type="checkbox" tabindex="45" data-objref="1158 0 R" data-field-name="Check Box 3016" imageName="3/form/1158 0 R" images="110100" onchange="onSpellcastingCheck(event);"/>
                                            <input id="spell1_10Prep" type="checkbox" tabindex="46" data-objref="1159 0 R" data-field-name="Check Box 3017" imageName="3/form/1159 0 R" images="110100" onchange="onSpellcastingCheck(event);"/>
                                            <input id="spell1_11Prep" type="checkbox" tabindex="47" data-objref="1160 0 R" data-field-name="Check Box 3018" imageName="3/form/1160 0 R" images="110100" onchange="onSpellcastingCheck(event);"/>
                                            <input id="spell1_12Prep" type="checkbox" tabindex="48" data-objref="1161 0 R" data-field-name="Check Box 3019" imageName="3/form/1161 0 R" images="110100" onchange="onSpellcastingCheck(event);"/>
                                            <input id="spell1_1" type="text" tabindex="49" value="" data-objref="1118 0 R" data-field-name="Spells 1015" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;" ondblclick="showSpellInfoRight(this)"/>
                                            <input id="spell1_2" type="text" tabindex="50" value="" data-objref="1149 0 R" data-field-name="Spells 1023" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;" ondblclick="showSpellInfoRight(this)"/>
                                            <input id="spell1_3" type="text" tabindex="51" value="" data-objref="1162 0 R" data-field-name="Spells 1024" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;" ondblclick="showSpellInfoRight(this)"/>
                                            <input id="spell1_4" type="text" tabindex="52" value="" data-objref="1163 0 R" data-field-name="Spells 1025" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;" ondblclick="showSpellInfoRight(this)"/>
                                            <input id="spell1_5" type="text" tabindex="53" value="" data-objref="1164 0 R" data-field-name="Spells 1026" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;" ondblclick="showSpellInfoRight(this)"/>
                                            <input id="spell1_6" type="text" tabindex="54" value="" data-objref="1165 0 R" data-field-name="Spells 1027" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;" ondblclick="showSpellInfoRight(this)"/>
                                            <input id="spell1_7" type="text" tabindex="55" value="" data-objref="1166 0 R" data-field-name="Spells 1028" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;" ondblclick="showSpellInfoRight(this)"/>
                                            <input id="spell1_8" type="text" tabindex="56" value="" data-objref="1167 0 R" data-field-name="Spells 1029" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;" ondblclick="showSpellInfoRight(this)"/>
                                            <input id="spell1_9" type="text" tabindex="57" value="" data-objref="1168 0 R" data-field-name="Spells 1030" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;" ondblclick="showSpellInfoRight(this)"/>
                                            <input id="spell1_10" type="text" tabindex="58" value="" data-objref="1169 0 R" data-field-name="Spells 1031" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;" ondblclick="showSpellInfoRight(this)"/>
                                            <input id="spell1_11" type="text" tabindex="59" value="" data-objref="1170 0 R" data-field-name="Spells 1032" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;" ondblclick="showSpellInfoRight(this)"/>
                                            <input id="spell1_12" type="text" tabindex="60" value="" data-objref="1171 0 R" data-field-name="Spells 1033" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;" ondblclick="showSpellInfoRight(this)"/>
                                            <input id="slots2_1" type="text" tabindex="61" value="" data-objref="1172 0 R" data-field-name="SlotsTotal 20" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;"/>
                                            <input id="slots2_2" type="text" tabindex="62" value="" data-objref="1173 0 R" data-field-name="SlotsRemaining 20" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;"/>
                                            <input id="spell2_1" type="text" tabindex="63" value="" data-objref="1186 0 R" data-field-name="Spells 1046" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;" ondblclick="showSpellInfoRight(this)"/>
                                            <input id="spell2_2" type="text" tabindex="64" value="" data-objref="1174 0 R" data-field-name="Spells 1034" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;" ondblclick="showSpellInfoRight(this)"/>
                                            <input id="spell2_3" type="text" tabindex="65" value="" data-objref="1175 0 R" data-field-name="Spells 1035" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;" ondblclick="showSpellInfoRight(this)"/>
                                            <input id="spell2_4" type="text" tabindex="66" value="" data-objref="1176 0 R" data-field-name="Spells 1036" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;" ondblclick="showSpellInfoRight(this)"/>
                                            <input id="spell2_5" type="text" tabindex="67" value="" data-objref="1177 0 R" data-field-name="Spells 1037" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;" ondblclick="showSpellInfoRight(this)"/>
                                            <input id="spell2_6" type="text" tabindex="68" value="" data-objref="1178 0 R" data-field-name="Spells 1038" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;" ondblclick="showSpellInfoRight(this)"/>
                                            <input id="spell2_7" type="text" tabindex="69" value="" data-objref="1179 0 R" data-field-name="Spells 1039" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;" ondblclick="showSpellInfoRight(this)"/>
                                            <input id="spell2_8" type="text" tabindex="70" value="" data-objref="1180 0 R" data-field-name="Spells 1040" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;" ondblclick="showSpellInfoRight(this)"/>
                                            <input id="spell2_9" type="text" tabindex="71" value="" data-objref="1181 0 R" data-field-name="Spells 1041" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;" ondblclick="showSpellInfoRight(this)"/>
                                            <input id="spell2_10" type="text" tabindex="72" value="" data-objref="1182 0 R" data-field-name="Spells 1042" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;" ondblclick="showSpellInfoRight(this)"/>
                                            <input id="spell2_11" type="text" tabindex="73" value="" data-objref="1183 0 R" data-field-name="Spells 1043" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;" ondblclick="showSpellInfoRight(this)"/>
                                            <input id="spell2_12" type="text" tabindex="74" value="" data-objref="1184 0 R" data-field-name="Spells 1044" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;" ondblclick="showSpellInfoRight(this)"/>
                                            <input id="spell2_13" type="text" tabindex="75" value="" data-objref="1185 0 R" data-field-name="Spells 1045" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;" ondblclick="showSpellInfoRight(this)"/>
                                            <input id="slots3_1" type="text" tabindex="76" value="" data-objref="1187 0 R" data-field-name="SlotsTotal 21" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;"/>
                                            <input id="slots3_2" type="text" tabindex="77" value="" data-objref="1188 0 R" data-field-name="SlotsRemaining 21" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;"/>
                                            <input id="spell3_1" type="text" tabindex="78" value="" data-objref="1190 0 R" data-field-name="Spells 1048" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;" ondblclick="showSpellInfo(this)"/>
                                            <input id="spell3_2" type="text" tabindex="79" value="" data-objref="1189 0 R" data-field-name="Spells 1047" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;" ondblclick="showSpellInfo(this)"/>
                                            <input id="spell3_3" type="text" tabindex="80" value="" data-objref="1191 0 R" data-field-name="Spells 1049" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;" ondblclick="showSpellInfo(this)"/>
                                            <input id="spell3_4" type="text" tabindex="81" value="" data-objref="1192 0 R" data-field-name="Spells 1050" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;" ondblclick="showSpellInfo(this)"/>
                                            <input id="spell3_5" type="text" tabindex="82" value="" data-objref="1193 0 R" data-field-name="Spells 1051" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;" ondblclick="showSpellInfo(this)"/>
                                            <input id="spell3_6" type="text" tabindex="83" value="" data-objref="1194 0 R" data-field-name="Spells 1052" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;" ondblclick="showSpellInfo(this)"/>
                                            <input id="spell3_7" type="text" tabindex="84" value="" data-objref="1195 0 R" data-field-name="Spells 1053" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;" ondblclick="showSpellInfo(this)"/>
                                            <input id="spell3_8" type="text" tabindex="85" value="" data-objref="1196 0 R" data-field-name="Spells 1054" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;" ondblclick="showSpellInfo(this)"/>
                                            <input id="spell3_9" type="text" tabindex="86" value="" data-objref="1197 0 R" data-field-name="Spells 1055" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;" ondblclick="showSpellInfo(this)"/>
                                            <input id="spell3_10" type="text" tabindex="87" value="" data-objref="1198 0 R" data-field-name="Spells 1056" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;" ondblclick="showSpellInfo(this)"/>
                                            <input id="spell3_11" type="text" tabindex="88" value="" data-objref="1199 0 R" data-field-name="Spells 1057" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;" ondblclick="showSpellInfo(this)"/>
                                            <input id="spell3_12" type="text" tabindex="89" value="" data-objref="1200 0 R" data-field-name="Spells 1058" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;" ondblclick="showSpellInfo(this)"/>
                                            <input id="spell3_13" type="text" tabindex="90" value="" data-objref="1201 0 R" data-field-name="Spells 1059" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;" ondblclick="showSpellInfo(this)"/>
                                            <input id="slots4_1" type="text" tabindex="91" value="" data-objref="1202 0 R" data-field-name="SlotsTotal 22" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;"/>
                                            <input id="slots4_2" type="text" tabindex="92" value="" data-objref="1203 0 R" data-field-name="SlotsRemaining 22" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;"/>
                                            <input id="spell7_1Prep" type="checkbox" tabindex="98" data-objref="1209 0 R" data-field-name="Check Box 323" imageName="3/form/1209 0 R" images="110100" onchange="onSpellcastingCheck(event);"/>
                                            <input id="spell7_2Prep" type="checkbox" tabindex="99" data-objref="1210 0 R" data-field-name="Check Box 322" imageName="3/form/1210 0 R" images="110100" onchange="onSpellcastingCheck(event);"/>
                                            <input id="spell7_3Prep" type="checkbox" tabindex="100" data-objref="1211 0 R" data-field-name="Check Box 3067" imageName="3/form/1211 0 R" images="110100" onchange="onSpellcastingCheck(event);"/>
                                            <input id="spell7_4Prep" type="checkbox" tabindex="101" data-objref="1212 0 R" data-field-name="Check Box 3068" imageName="3/form/1212 0 R" images="110100" onchange="onSpellcastingCheck(event);"/>
                                            <input id="spell7_5Prep" type="checkbox" tabindex="102" data-objref="1213 0 R" data-field-name="Check Box 3069" imageName="3/form/1213 0 R" images="110100" onchange="onSpellcastingCheck(event);"/>
                                            <input id="spell7_6Prep" type="checkbox" tabindex="103" data-objref="1214 0 R" data-field-name="Check Box 3070" imageName="3/form/1214 0 R" images="110100" onchange="onSpellcastingCheck(event);"/>
                                            <input id="spell7_7Prep" type="checkbox" tabindex="104" data-objref="1215 0 R" data-field-name="Check Box 3071" imageName="3/form/1215 0 R" images="110100" onchange="onSpellcastingCheck(event);"/>
                                            <input id="spell7_8Prep" type="checkbox" tabindex="105" data-objref="1216 0 R" data-field-name="Check Box 3072" imageName="3/form/1216 0 R" images="110100" onchange="onSpellcastingCheck(event);"/>
                                            <input id="spell7_9Prep" type="checkbox" tabindex="106" data-objref="1217 0 R" data-field-name="Check Box 3073" imageName="3/form/1217 0 R" images="110100" onchange="onSpellcastingCheck(event);"/>
                                            <input id="spell4_1" type="text" tabindex="93" value="" data-objref="1204 0 R" data-field-name="Spells 1060" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;" ondblclick="showSpellInfo(this)"/>
                                            <input id="spell4_2" type="text" tabindex="94" value="" data-objref="1205 0 R" data-field-name="Spells 1061" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;" ondblclick="showSpellInfo(this)"/>
                                            <input id="spell4_3" type="text" tabindex="95" value="" data-objref="1206 0 R" data-field-name="Spells 1062" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;" ondblclick="showSpellInfo(this)"/>
                                            <input id="spell4_4" type="text" tabindex="96" value="" data-objref="1207 0 R" data-field-name="Spells 1063" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;" ondblclick="showSpellInfo(this)"/>
                                            <input id="spell4_5" type="text" tabindex="97" value="" data-objref="1208 0 R" data-field-name="Spells 1064" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;" ondblclick="showSpellInfo(this)"/>
                                            <input id="spell4_6" type="text" tabindex="107" value="" data-objref="1218 0 R" data-field-name="Spells 1065" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;" ondblclick="showSpellInfo(this)"/>
                                            <input id="spell4_7" type="text" tabindex="108" value="" data-objref="1219 0 R" data-field-name="Spells 1066" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;" ondblclick="showSpellInfo(this)"/>
                                            <input id="spell4_8" type="text" tabindex="109" value="" data-objref="1220 0 R" data-field-name="Spells 1067" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;" ondblclick="showSpellInfo(this)"/>
                                            <input id="spell4_9" type="text" tabindex="110" value="" data-objref="1221 0 R" data-field-name="Spells 1068" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;" ondblclick="showSpellInfo(this)"/>
                                            <input id="spell4_10" type="text" tabindex="111" value="" data-objref="1222 0 R" data-field-name="Spells 1069" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;" ondblclick="showSpellInfo(this)"/>
                                            <input id="spell4_11" type="text" tabindex="112" value="" data-objref="1223 0 R" data-field-name="Spells 1070" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;" ondblclick="showSpellInfo(this)"/>
                                            <input id="spell4_12" type="text" tabindex="113" value="" data-objref="1224 0 R" data-field-name="Spells 1071" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;" ondblclick="showSpellInfo(this)"/>
                                            <input id="spell4_13" type="text" tabindex="115" value="" data-objref="1226 0 R" data-field-name="Spells 1072" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;" ondblclick="showSpellInfo(this)"/>
                                            <input id="spell4_1Prep" type="checkbox" tabindex="114" data-objref="1225 0 R" data-field-name="Check Box 317" imageName="3/form/1225 0 R" images="110100" onchange="onSpellcastingCheck(event);"/>
                                            <input id="slots5_1" type="text" tabindex="116" value="" data-objref="1227 0 R" data-field-name="SlotsTotal 23" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;"/>
                                            <input id="slots5_2" type="text" tabindex="117" value="" data-objref="1228 0 R" data-field-name="SlotsRemaining 23" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;"/>
                                            <input id="spell5_1" type="text" tabindex="118" value="" data-objref="1229 0 R" data-field-name="Spells 1073" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;" ondblclick="showSpellInfo(this)"/>
                                            <input id="spell5_2" type="text" tabindex="119" value="" data-objref="1230 0 R" data-field-name="Spells 1074" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;" ondblclick="showSpellInfo(this)"/>
                                            <input id="spell5_3" type="text" tabindex="120" value="" data-objref="1231 0 R" data-field-name="Spells 1075" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;" ondblclick="showSpellInfo(this)"/>
                                            <input id="spell5_4" type="text" tabindex="121" value="" data-objref="1232 0 R" data-field-name="Spells 1076" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;" ondblclick="showSpellInfo(this)"/>
                                            <input id="spell5_5" type="text" tabindex="122" value="" data-objref="1233 0 R" data-field-name="Spells 1077" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;" ondblclick="showSpellInfo(this)"/>
                                            <input id="spell5_6" type="text" tabindex="123" value="" data-objref="1234 0 R" data-field-name="Spells 1078" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;" ondblclick="showSpellInfo(this)"/>
                                            <input id="spell5_7" type="text" tabindex="124" value="" data-objref="1235 0 R" data-field-name="Spells 1079" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;" ondblclick="showSpellInfo(this)"/>
                                            <input id="spell5_8" type="text" tabindex="125" value="" data-objref="1236 0 R" data-field-name="Spells 1080" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;" ondblclick="showSpellInfo(this)"/>
                                            <input id="spell5_9" type="text" tabindex="126" value="" data-objref="1237 0 R" data-field-name="Spells 1081" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;" ondblclick="showSpellInfo(this)"/>
                                            <input id="slots6_1" type="text" tabindex="127" value="" data-objref="1238 0 R" data-field-name="SlotsTotal 24" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;"/>
                                            <input id="slots6_2" type="text" tabindex="128" value="" data-objref="1239 0 R" data-field-name="SlotsRemaining 24" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;"/>
                                            <input id="spell6_1" type="text" tabindex="129" value="" data-objref="1240 0 R" data-field-name="Spells 1082" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;" ondblclick="showSpellInfo(this)"/>
                                            <input id="spell6_2" type="text" tabindex="130" value="" data-objref="1241 0 R" data-field-name="Spells 1083" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;" ondblclick="showSpellInfo(this)"/>
                                            <input id="spell6_3" type="text" tabindex="131" value="" data-objref="1242 0 R" data-field-name="Spells 1084" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;" ondblclick="showSpellInfo(this)"/>
                                            <input id="spell6_4" type="text" tabindex="132" value="" data-objref="1243 0 R" data-field-name="Spells 1085" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;" ondblclick="showSpellInfo(this)"/>
                                            <input id="spell6_5" type="text" tabindex="133" value="" data-objref="1244 0 R" data-field-name="Spells 1086" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;" ondblclick="showSpellInfo(this)"/>
                                            <input id="spell6_6" type="text" tabindex="134" value="" data-objref="1245 0 R" data-field-name="Spells 1087" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;" ondblclick="showSpellInfo(this)"/>
                                            <input id="spell6_7" type="text" tabindex="135" value="" data-objref="1246 0 R" data-field-name="Spells 1088" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;" ondblclick="showSpellInfo(this)"/>
                                            <input id="spell6_8" type="text" tabindex="136" value="" data-objref="1247 0 R" data-field-name="Spells 1089" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;" ondblclick="showSpellInfo(this)"/>
                                            <input id="spell6_9" type="text" tabindex="137" value="" data-objref="1248 0 R" data-field-name="Spells 1090" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;" ondblclick="showSpellInfo(this)"/>
                                            <input id="slots7_1" type="text" tabindex="138" value="" data-objref="1249 0 R" data-field-name="SlotsTotal 25" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;"/>
                                            <input id="slots7_2" type="text" tabindex="139" value="" data-objref="1250 0 R" data-field-name="SlotsRemaining 25" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;"/>
                                            <input id="spell7_1" type="text" tabindex="140" value="" data-objref="1251 0 R" data-field-name="Spells 1091" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;" ondblclick="showSpellInfo(this)"/>
                                            <input id="spell7_2" type="text" tabindex="141" value="" data-objref="1252 0 R" data-field-name="Spells 1092" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;" ondblclick="showSpellInfo(this)"/>
                                            <input id="spell7_3" type="text" tabindex="142" value="" data-objref="1253 0 R" data-field-name="Spells 1093" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;" ondblclick="showSpellInfo(this)"/>
                                            <input id="spell7_4" type="text" tabindex="143" value="" data-objref="1254 0 R" data-field-name="Spells 1094" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;" ondblclick="showSpellInfo(this)"/>
                                            <input id="spell7_5" type="text" tabindex="144" value="" data-objref="1255 0 R" data-field-name="Spells 1095" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;" ondblclick="showSpellInfo(this)"/>
                                            <input id="spell7_6" type="text" tabindex="145" value="" data-objref="1256 0 R" data-field-name="Spells 1096" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;" ondblclick="showSpellInfo(this)"/>
                                            <input id="spell7_7" type="text" tabindex="146" value="" data-objref="1257 0 R" data-field-name="Spells 1097" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;" ondblclick="showSpellInfo(this)"/>
                                            <input id="spell7_8" type="text" tabindex="147" value="" data-objref="1258 0 R" data-field-name="Spells 1098" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;" ondblclick="showSpellInfo(this)"/>
                                            <input id="spell7_9" type="text" tabindex="148" value="" data-objref="1259 0 R" data-field-name="Spells 1099" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;" ondblclick="showSpellInfo(this)"/>
                                            <input id="slots8_1" type="text" tabindex="149" value="" data-objref="1260 0 R" data-field-name="SlotsTotal 26" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;"/>
                                            <input id="slots8_2" type="text" tabindex="150" value="" data-objref="1261 0 R" data-field-name="SlotsRemaining 26" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;"/>
                                            <input id="spell4_2Prep" type="checkbox" tabindex="155" data-objref="1266 0 R" data-field-name="Check Box 316" imageName="3/form/1266 0 R" images="110100" onchange="onSpellcastingCheck(event);"/>
                                            <input id="spell4_3Prep" type="checkbox" tabindex="156" data-objref="1267 0 R" data-field-name="Check Box 3042" imageName="3/form/1267 0 R" images="110100" onchange="onSpellcastingCheck(event);"/>
                                            <input id="spell4_4Prep" type="checkbox" tabindex="157" data-objref="1268 0 R" data-field-name="Check Box 3043" imageName="3/form/1268 0 R" images="110100" onchange="onSpellcastingCheck(event);"/>
                                            <input id="spell4_5Prep" type="checkbox" tabindex="158" data-objref="1269 0 R" data-field-name="Check Box 3044" imageName="3/form/1269 0 R" images="110100" onchange="onSpellcastingCheck(event);"/>
                                            <input id="spell4_6Prep" type="checkbox" tabindex="159" data-objref="1270 0 R" data-field-name="Check Box 3045" imageName="3/form/1270 0 R" images="110100" onchange="onSpellcastingCheck(event);"/>
                                            <input id="spell4_7Prep" type="checkbox" tabindex="160" data-objref="1271 0 R" data-field-name="Check Box 3046" imageName="3/form/1271 0 R" images="110100" onchange="onSpellcastingCheck(event);"/>
                                            <input id="spell4_8Prep" type="checkbox" tabindex="161" data-objref="1272 0 R" data-field-name="Check Box 3047" imageName="3/form/1272 0 R" images="110100" onchange="onSpellcastingCheck(event);"/>
                                            <input id="spell4_9Prep" type="checkbox" tabindex="162" data-objref="1273 0 R" data-field-name="Check Box 3048" imageName="3/form/1273 0 R" images="110100" onchange="onSpellcastingCheck(event);"/>
                                            <input id="spell4_10Prep" type="checkbox" tabindex="163" data-objref="1274 0 R" data-field-name="Check Box 3049" imageName="3/form/1274 0 R" images="110100" onchange="onSpellcastingCheck(event);"/>
                                            <input id="spell4_11Prep" type="checkbox" tabindex="164" data-objref="1275 0 R" data-field-name="Check Box 3050" imageName="3/form/1275 0 R" images="110100" onchange="onSpellcastingCheck(event);"/>
                                            <input id="spell4_12Prep" type="checkbox" tabindex="165" data-objref="1276 0 R" data-field-name="Check Box 3051" imageName="3/form/1276 0 R" images="110100" onchange="onSpellcastingCheck(event);"/>
                                            <input id="spell4_13Prep" type="checkbox" tabindex="166" data-objref="1277 0 R" data-field-name="Check Box 3052" imageName="3/form/1277 0 R" images="110100" onchange="onSpellcastingCheck(event);"/>
                                            <input id="spell8_1Prep" type="checkbox" tabindex="168" data-objref="1279 0 R" data-field-name="Check Box 325" imageName="3/form/1279 0 R" images="110100" onchange="onSpellcastingCheck(event);"/>
                                            <input id="spell8_2Prep" type="checkbox" tabindex="169" data-objref="1280 0 R" data-field-name="Check Box 324" imageName="3/form/1280 0 R" images="110100" onchange="onSpellcastingCheck(event);"/>
                                            <input id="spell8_3Prep" type="checkbox" tabindex="170" data-objref="1281 0 R" data-field-name="Check Box 3074" imageName="3/form/1281 0 R" images="110100" onchange="onSpellcastingCheck(event);"/>
                                            <input id="spell8_4Prep" type="checkbox" tabindex="171" data-objref="1282 0 R" data-field-name="Check Box 3075" imageName="3/form/1282 0 R" images="110100" onchange="onSpellcastingCheck(event);"/>
                                            <input id="spell8_5Prep" type="checkbox" tabindex="172" data-objref="1283 0 R" data-field-name="Check Box 3076" imageName="3/form/1283 0 R" images="110100" onchange="onSpellcastingCheck(event);"/>
                                            <input id="spell8_6Prep" type="checkbox" tabindex="173" data-objref="1284 0 R" data-field-name="Check Box 3077" imageName="3/form/1284 0 R" images="110100" onchange="onSpellcastingCheck(event);"/>
                                            <input id="spell8_1" type="text" tabindex="151" value="" data-objref="1262 0 R" data-field-name="Spells 10100" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;" ondblclick="showSpellInfo(this)"/>
                                            <input id="spell8_2" type="text" tabindex="152" value="" data-objref="1263 0 R" data-field-name="Spells 10101" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;" ondblclick="showSpellInfo(this)"/>
                                            <input id="spell8_3" type="text" tabindex="153" value="" data-objref="1264 0 R" data-field-name="Spells 10102" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;" ondblclick="showSpellInfo(this)"/>
                                            <input id="spell8_4" type="text" tabindex="154" value="" data-objref="1265 0 R" data-field-name="Spells 10103" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;" ondblclick="showSpellInfo(this)"/>
                                            <input id="spell8_5" type="text" tabindex="167" value="" data-objref="1278 0 R" data-field-name="Spells 10104" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;" ondblclick="showSpellInfo(this)"/>
                                            <input id="spell8_6" type="text" tabindex="174" value="" data-objref="1285 0 R" data-field-name="Spells 10105" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;" ondblclick="showSpellInfo(this)"/>
                                            <input id="spell8_7" type="text" tabindex="175" value="" data-objref="1286 0 R" data-field-name="Spells 10106" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;" ondblclick="showSpellInfo(this)"/>
                                            <input id="spell8_7Prep" type="checkbox" tabindex="176" data-objref="1287 0 R" data-field-name="Check Box 3078" imageName="3/form/1287 0 R" images="110100" onchange="onSpellcastingCheck(event);"/>
                                            <input id="slots9_1" type="text" tabindex="177" value="" data-objref="1288 0 R" data-field-name="SlotsTotal 27" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;"/>
                                            <input id="slots9_2" type="text" tabindex="178" value="" data-objref="1289 0 R" data-field-name="SlotsRemaining 27" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;"/>
                                            <input id="spell2_1Prep" type="checkbox" tabindex="179" data-objref="1290 0 R" data-field-name="Check Box 313" imageName="3/form/1290 0 R" images="110100" onchange="onSpellcastingCheck(event);"/>
                                            <input id="spell2_2Prep" type="checkbox" tabindex="180" data-objref="1291 0 R" data-field-name="Check Box 310" imageName="3/form/1291 0 R" images="110100" onchange="onSpellcastingCheck(event);"/>
                                            <input id="spell2_3Prep" type="checkbox" tabindex="181" data-objref="1292 0 R" data-field-name="Check Box 3020" imageName="3/form/1292 0 R" images="110100" onchange="onSpellcastingCheck(event);"/>
                                            <input id="spell2_4Prep" type="checkbox" tabindex="182" data-objref="1293 0 R" data-field-name="Check Box 3021" imageName="3/form/1293 0 R" images="110100" onchange="onSpellcastingCheck(event);"/>
                                            <input id="spell2_5Prep" type="checkbox" tabindex="183" data-objref="1294 0 R" data-field-name="Check Box 3022" imageName="3/form/1294 0 R" images="110100" onchange="onSpellcastingCheck(event);"/>
                                            <input id="spell2_6Prep" type="checkbox" tabindex="184" data-objref="1295 0 R" data-field-name="Check Box 3023" imageName="3/form/1295 0 R" images="110100" onchange="onSpellcastingCheck(event);"/>
                                            <input id="spell2_7Prep" type="checkbox" tabindex="185" data-objref="1296 0 R" data-field-name="Check Box 3024" imageName="3/form/1296 0 R" images="110100" onchange="onSpellcastingCheck(event);"/>
                                            <input id="spell2_8Prep" type="checkbox" tabindex="186" data-objref="1297 0 R" data-field-name="Check Box 3025" imageName="3/form/1297 0 R" images="110100" onchange="onSpellcastingCheck(event);"/>
                                            <input id="spell2_9Prep" type="checkbox" tabindex="187" data-objref="1298 0 R" data-field-name="Check Box 3026" imageName="3/form/1298 0 R" images="110100" onchange="onSpellcastingCheck(event);"/>
                                            <input id="spell2_10Prep" type="checkbox" tabindex="188" data-objref="1299 0 R" data-field-name="Check Box 3027" imageName="3/form/1299 0 R" images="110100" onchange="onSpellcastingCheck(event);"/>
                                            <input id="spell2_11Prep" type="checkbox" tabindex="189" data-objref="1300 0 R" data-field-name="Check Box 3028" imageName="3/form/1300 0 R" images="110100" onchange="onSpellcastingCheck(event);"/>
                                            <input id="spell2_12Prep" type="checkbox" tabindex="190" data-objref="1301 0 R" data-field-name="Check Box 3029" imageName="3/form/1301 0 R" images="110100" onchange="onSpellcastingCheck(event);"/>
                                            <input id="spell2_13Prep" type="checkbox" tabindex="191" data-objref="1302 0 R" data-field-name="Check Box 3030" imageName="3/form/1302 0 R" images="110100" onchange="onSpellcastingCheck(event);"/>
                                            <input id="spell5_1Prep" type="checkbox" tabindex="198" data-objref="1309 0 R" data-field-name="Check Box 319" imageName="3/form/1309 0 R" images="110100" onchange="onSpellcastingCheck(event);"/>
                                            <input id="spell5_2Prep" type="checkbox" tabindex="199" data-objref="1310 0 R" data-field-name="Check Box 318" imageName="3/form/1310 0 R" images="110100" onchange="onSpellcastingCheck(event);"/>
                                            <input id="spell5_3Prep" type="checkbox" tabindex="200" data-objref="1311 0 R" data-field-name="Check Box 3053" imageName="3/form/1311 0 R" images="110100" onchange="onSpellcastingCheck(event);"/>
                                            <input id="spell5_4Prep" type="checkbox" tabindex="201" data-objref="1312 0 R" data-field-name="Check Box 3054" imageName="3/form/1312 0 R" images="110100" onchange="onSpellcastingCheck(event);"/>
                                            <input id="spell5_5Prep" type="checkbox" tabindex="202" data-objref="1313 0 R" data-field-name="Check Box 3055" imageName="3/form/1313 0 R" images="110100" onchange="onSpellcastingCheck(event);"/>
                                            <input id="spell5_6Prep" type="checkbox" tabindex="203" data-objref="1314 0 R" data-field-name="Check Box 3056" imageName="3/form/1314 0 R" images="110100" onchange="onSpellcastingCheck(event);"/>
                                            <input id="spell5_7Prep" type="checkbox" tabindex="204" data-objref="1315 0 R" data-field-name="Check Box 3057" imageName="3/form/1315 0 R" images="110100" onchange="onSpellcastingCheck(event);"/>
                                            <input id="spell5_8Prep" type="checkbox" tabindex="205" data-objref="1316 0 R" data-field-name="Check Box 3058" imageName="3/form/1316 0 R" images="110100" onchange="onSpellcastingCheck(event);"/>
                                            <input id="spell5_9Prep" type="checkbox" tabindex="206" data-objref="1317 0 R" data-field-name="Check Box 3059" imageName="3/form/1317 0 R" images="110100" onchange="onSpellcastingCheck(event);"/>
                                            <input id="spell9_1Prep" type="checkbox" tabindex="207" data-objref="1318 0 R" data-field-name="Check Box 327" imageName="3/form/1318 0 R" images="110100" onchange="onSpellcastingCheck(event);"/>
                                            <input id="spell9_2Prep" type="checkbox" tabindex="208" data-objref="1319 0 R" data-field-name="Check Box 326" imageName="3/form/1319 0 R" images="110100" onchange="onSpellcastingCheck(event);"/>
                                            <input id="spell9_3Prep" type="checkbox" tabindex="209" data-objref="1320 0 R" data-field-name="Check Box 3079" imageName="3/form/1320 0 R" images="110100" onchange="onSpellcastingCheck(event);"/>
                                            <input id="spell9_4Prep" type="checkbox" tabindex="210" data-objref="1321 0 R" data-field-name="Check Box 3080" imageName="3/form/1321 0 R" images="110100" onchange="onSpellcastingCheck(event);"/>
                                            <input id="spell9_5Prep" type="checkbox" tabindex="211" data-objref="1322 0 R" data-field-name="Check Box 3081" imageName="3/form/1322 0 R" images="110100" onchange="onSpellcastingCheck(event);"/>
                                            <input id="spell9_6Prep" type="checkbox" tabindex="212" data-objref="1323 0 R" data-field-name="Check Box 3082" imageName="3/form/1323 0 R" images="110100" onchange="onSpellcastingCheck(event);"/>
                                            <input id="spell9_1" type="text" tabindex="192" value="" data-objref="1303 0 R" data-field-name="Spells 10107" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;" ondblclick="showSpellInfo(this)"/>
                                            <input id="spell9_2" type="text" tabindex="193" value="" data-objref="1304 0 R" data-field-name="Spells 10108" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;" ondblclick="showSpellInfo(this)"/>
                                            <input id="spell9_3" type="text" tabindex="194" value="" data-objref="1305 0 R" data-field-name="Spells 10109" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;" ondblclick="showSpellInfo(this)"/>
                                            <input id="spell9_4" type="text" tabindex="195" value="" data-objref="1306 0 R" data-field-name="Spells 101010" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;" ondblclick="showSpellInfo(this)"/>
                                            <input id="spell9_5" type="text" tabindex="196" value="" data-objref="1307 0 R" data-field-name="Spells 101011" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;" ondblclick="showSpellInfo(this)"/>
                                            <input id="spell9_6" type="text" tabindex="197" value="" data-objref="1308 0 R" data-field-name="Spells 101012" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;" ondblclick="showSpellInfo(this)"/>
                                            <input id="spell9_7" type="text" tabindex="213" value="" data-objref="1324 0 R" data-field-name="Spells 101013" onblur="onSpellcastingBlurEvent(event);" ondrop="return false;" ondblclick="showSpellInfo(this)"/>
                                            <input id="spell9_7Prep" type="checkbox" tabindex="214" data-objref="1325 0 R" data-field-name="Check Box 3083" imageName="3/form/1325 0 R" images="110100" onchange="onSpellcastingCheck(event);"/>
                                            <!-- End Form Data -->
                                        
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>

            <div id="dmContent" class="container-flex">
                <div class="container-padded">
                    <p>
                        You are <span id="userType">a Player</span>
                    </p>
                    <button class="button" id="login" style="display: none;">I want to be DM!</button>
                    <div id="loadOwlbear" style="display: none;">
                        <input id="owlbearUrl" type="url" name="url">
                        <button class="button mapControl" id="displayOwlbear">Load map for yourself</button>
                        <button class="button mapControl" id="submitOwlbearUrl">Load map for everyone</button>
                    </div>
                </div>
                <div id="playerSelectContainer" class="container-padded">
                    <p>
                        Player:
                    </p>
                    <div id="playerSelector" class="container-flex">
                        <select id="playerSelect">
                            <option value="self" id="playerSelectSelf" class="playerSelectOption" selected>You</option>
                        </select>
                    </div>
                </div>
                <div class="container-padded" id="playerHPContainer" style="display: none;"></div>
                <div class="container-padded" id="sessionControlContainer">
                    <button class="button" id="createSession">Create Session</button>
                    <input id="sessionid" type="text" name="sessionid">
                    <button class="button" id="joinSession">Join Session</button>
                </div>
                <div id="PDF-Manager" class="container-padded" style="margin-left: auto;">
                    <button class="button" style="display: block;" onclick="loadSheetsFromPdf()">Import Sheet(s) from PDF</button>
                    <button class="button" style="display: block;" onclick="exportSheetsToPdf()">Export Sheets to PDF</button>
                </div>
            </div>
        </div>
        <script>
            socket.emit("startupSync", {session_code: localStorage.getItem("session_code")}, (callback) => {
                data = callback
                if (data.session_exists) {
                    if (!data.hasDm) {
                        document.getElementById("login").style = "display: block;";
                        document.getElementById("loadOwlbear").style.display = "none";
                        document.getElementById("userType").innerText = "a Player";
                        document.getElementById("playerSelectContainer").style.display = "none"
                        dm = false;
                    }
                    document.getElementById("owlbearEmbed").src = data.url;
                    socket.emit("loadPlayerData", {
                        playerName: ((localStorage.getItem("playername") != null && localStorage.getItem("playername") != "" && localStorage.getItem("playername") != undefined) ? localStorage.getItem("playername") : "Unknown Player"),
                        hpNow: document.getElementById("hpCurrent").value,
                        hpMax: document.getElementById("hpMax").value,
                        session_code: localStorage.getItem("session_code")
                    })

                    document.getElementById("sessionid").value = localStorage.getItem("session_code")
                } else {
                    localStorage.removeItem("session_code")
                }
            })

            document.getElementById("login").onclick = () => {
                socket.emit("login", {session_code: localStorage.getItem("session_code")}, (response) => {
                    if (response.loggedIn) {
                        document.getElementById("login").style.display = "none";
                        document.getElementById("loadOwlbear").style.display = "block";
                        document.getElementById("userType").innerText = "the DM";
                        document.getElementById("playerSelectContainer").style.display = "block"
                        document.getElementById("playerHPContainer").style.display = "block"
                        dm = true;
                        currentPlayer = "self"
                    }
                })
            }

            socket.on("getPlayerSheets", () => {

                let playerSheet = {}
                let detailsSheet = {}
                let spellcastingSheet = {}

                let elements = document.querySelectorAll("[data-field-name]")

                let characterSheetNode = document.querySelector("[id='characterSheet']")
                let characterDetailsNode = document.querySelector("[id='characterDetails']")
                let spellcastingNode = document.querySelector("[id='spellcasting']")
                elements.forEach(element =>  {
                    if (characterSheetNode.contains(element)) {
                        if (element.matches('[type="checkbox"]')) {
                            playerSheet[(element.id.replace("_img", ""))] =  element.checked
                        } else if (element.type == "text" || element.tagName.toLowerCase() == "textarea"){
                            playerSheet[(element.id.replace("_img", ""))] = element.value
                        }
                    } else if (characterDetailsNode.contains(element)) {
                        if (element.matches('[type="checkbox"]')) {
                            detailsSheet[(element.id.replace("_img", ""))] =  element.checked
                        } else if (element.type == "text" || element.tagName.toLowerCase() == "textarea"){
                            detailsSheet[(element.id.replace("_img", ""))] = element.value
                        }
                    } else if (spellcastingNode.contains(element)) {
                        if (element.matches('[type="checkbox"]')) {
                            spellcastingSheet[(element.id.replace("_img", ""))] =  element.checked
                        } else if (element.type == "text" || element.tagName.toLowerCase() == "textarea"){
                            spellcastingSheet[(element.id.replace("_img", ""))] = element.value
                        }
                    }
                })

                socket.emit("sendPlayerSheets",
                    {
                        playerSheet: playerSheet,
                        detailsSheet: detailsSheet,
                        spellcastingSheet: spellcastingSheet,
                        session_code: localStorage.getItem("session_code")
                    }
                )
            })

            socket.on("newPlayer", (data) => {
                let option = document.createElement("option")
                option.value = data.player
                option.text = data.playerName
                document.getElementById("playerSelect").add(option)
                document.getElementById("playerSelect").onchange(event)

                let hpWrapper = document.createElement("div")
                hpWrapper.setAttribute("data-player", data.player)
                hpWrapper.style.display = "flex"

                let playerNameText = document.createElement("p")
                playerNameText.innerText = data.playerName + ":"
                playerNameText.classList.add("playerName")

                let playerHPProgressBarWrapper = document.createElement("div")
                playerHPProgressBarWrapper.classList.add("health-bar")

                let playerHpBar = document.createElement("div")
                playerHpBar.classList.add("bar")

                let playerHpHit = document.createElement("div")
                playerHpHit.classList.add("hit")

                playerHpBar.appendChild(playerHpHit)
                playerHPProgressBarWrapper.appendChild(playerHpBar)

                hpWrapper.appendChild(playerNameText)
                hpWrapper.appendChild(playerHPProgressBarWrapper)
                document.getElementById("playerHPContainer").appendChild(hpWrapper)

                updatePlayerHP(data)
            })

            socket.on("playerDisconnected", (data) => {
                let option = document.querySelector('option[value=\'' + data.player + '\']')
                if (option != undefined) {
                    option.remove()
                }
                let hpWrap = document.querySelector("[data-player='" + data.player + "']")
                if (hpWrap != undefined && hpWrap != null) {
                    hpWrap.remove()
                }
            })
    
            document.getElementById("displayOwlbear").onclick = () => {
                document.getElementById("owlbearEmbed").src = document.getElementById("owlbearUrl").value
            }

            document.getElementById("submitOwlbearUrl").onclick = () => {
                socket.emit("loadOwlbear", {
                    url: document.getElementById("owlbearUrl").value,
                    session_code: localStorage.getItem("session_code")
                })
            }

            document.getElementById("playerSelect").onchange = (event) => {
                if (event.type != "change") return
                currentPlayer = event.target.value

                if (currentPlayer != "self") {
                    socket.emit("getPlayerSheets", {
                        player: event.target.value,
                        session_code: localStorage.getItem("session_code")
                    })

                } else {
                    Object.keys(localStorage).forEach(function(key){
                        if (key == "split-sizes") return
                        if (key == "session_code") return
                        let value = localStorage.getItem(key)
                        if (value == "true" || value == "false") {
                            if (value == "true") {
                                document.getElementById(key.replace("_img", "")).setAttribute('checked', 'checked')
                            } else {
                                document.getElementById(key.replace("_img", "")).removeAttribute('checked')
                            }
                        } else {
                            document.getElementById(key.replace("_img", "")).value = value
                        }
                    })
                }
                fixCheckedAll()
            }
                
            document.getElementById("createSession").onclick = () => {
                socket.emit("createSession", (callback) => {
                    localStorage.setItem("session_code", callback.session_code)
                    document.getElementById("sessionid").value = callback.session_code

                    socket.emit("sync", {session_code: localStorage.getItem("session_code")}, (callback) => {
                        data = callback
                        if (data.session_exists) {
                            if (!data.hasDm) {
                                document.getElementById("login").style = "display: block;";
                                document.getElementById("loadOwlbear").style.display = "none";
                                document.getElementById("userType").innerText = "a Player";
                                document.getElementById("playerSelectContainer").style.display = "none"
                                dm = false;
                            }
                            document.getElementById("owlbearEmbed").src = data.url;
                            socket.emit("loadPlayerData", {
                                playerName: ((localStorage.getItem("playername") != null && localStorage.getItem("playername") != "" && localStorage.getItem("playername") != undefined) ? localStorage.getItem("playername") : "Unknown Player"),
                                hpNow: document.getElementById("hpCurrent").value,
                                hpMax: document.getElementById("hpMax").value,
                                session_code: localStorage.getItem("session_code")
                            })
                        } else {
                            localStorage.removeItem("session_code")
                        }
                    })
                })
            }

            document.getElementById("joinSession").onclick = () => {
                socket.emit("joinSession", {session_code: document.getElementById("sessionid").value}, (callback) => {
                    if (callback.joined) {
                        localStorage.setItem("session_code", document.getElementById("sessionid").value)

                        socket.emit("sync", {session_code: localStorage.getItem("session_code")}, (callback) => {
                            data = callback
                            if (data.session_exists) {
                                if (!data.hasDm) {
                                    document.getElementById("login").style = "display: block;";
                                    document.getElementById("loadOwlbear").style.display = "none";
                                    document.getElementById("userType").innerText = "a Player";
                                    document.getElementById("playerSelectContainer").style.display = "none"
                                    dm = false;
                                }
                                document.getElementById("owlbearEmbed").src = data.url;
                                socket.emit("loadPlayerData", {
                                    playerName: ((localStorage.getItem("playername") != null && localStorage.getItem("playername") != "" && localStorage.getItem("playername") != undefined) ? localStorage.getItem("playername") : "Unknown Player"),
                                    hpNow: document.getElementById("hpCurrent").value,
                                    hpMax: document.getElementById("hpMax").value,
                                    session_code: localStorage.getItem("session_code")
                                })
                            } else {
                                localStorage.removeItem("session_code")
                            }
                        })
                    }
                })
            }

            socket.on("sendPlayerSheets", (data) => {
                for (const [key, value] of Object.entries(data.playerSheet)) {
                    if (value === true || value === false) {
                        if (value === true) {
                            document.getElementById(key.replace("_img", "")).setAttribute('checked', 'checked')
                        } else {
                            document.getElementById(key.replace("_img", "")).removeAttribute('checked')
                        }
                    } else {
                        document.getElementById(key.replace("_img", "")).value = value
                    }
                    fixCheckedAll()
                }
                for (let [key, value] of Object.entries(data.detailsSheet)) {
                    if (value === true || value === false) {
                        if (value === true) {
                            document.getElementById(key.replace("_img", "")).setAttribute('checked', 'checked')
                        } else {
                            document.getElementById(key.replace("_img", "")).removeAttribute('checked')
                        }
                    } else {
                        document.getElementById(key.replace("_img", "")).value = value
                    }
                    fixCheckedAll()
                }
                for (let [key, value] of Object.entries(data.spellcastingSheet)) {
                    if (value === true || value === false) {
                        if (value === true) {
                            document.getElementById(key.replace("_img", "")).setAttribute('checked', 'checked')
                        } else {
                            document.getElementById(key.replace("_img", "")).removeAttribute('checked')
                        }
                    } else {
                        document.getElementById(key.replace("_img", "")).value = value
                    }
                    fixCheckedAll()
                }
            })

            socket.on("updateCharacterSheet", (data) => {
                if (data.player == currentPlayer) {
                    switch (data.type) {
                        case "text":
                            document.getElementById(data.elementID).value = data.value
                            break

                        case "checkbox":
                            if (data.checked == "checked" || data.checked == true) {
                                document.getElementById(data.elementID).setAttribute("checked", "checked")
                            } else {
                                document.getElementById(data.elementID).removeAttribute("checked")
                            }
                            fixCheckedAll()
                            break
                    }
                }
            })

            socket.on("updateDetailsSheet", (data) => {
                if (data.player == currentPlayer) {
                    switch (data.type) {
                        case "text":
                            document.getElementById(data.elementID).value = data.value
                            break

                        case "checkbox":
                            if (data.checked == "checked" || data.checked == true) {
                                document.getElementById(data.elementID).setAttribute("checked", "checked")
                            } else {
                                document.getElementById(data.elementID).removeAttribute("checked")
                            }
                            fixCheckedAll()
                            break
                    }
                }
            })

            socket.on("updateSpellcastingSheet", (data) => {
                if (data.player == currentPlayer) {
                    switch (data.type) {
                        case "text":
                            document.getElementById(data.elementID).value = data.value
                            break

                        case "checkbox":
                            if (data.checked == "checked" || data.checked == true) {
                                document.getElementById(data.elementID).setAttribute("checked", "checked")
                            } else {
                                document.getElementById(data.elementID).removeAttribute("checked")
                            }
                            fixCheckedAll()
                            break
                    }
                }
            })

            socket.on("updatePlayerHP", (data) => {
                updatePlayerHP(data)
            })

            let data = {}

            data.hpNow = ((localStorage.getItem("hpCurrent") != null && localStorage.getItem("hpCurrent") != "" && localStorage.getItem("hpCurrent") != undefined) ? localStorage.getItem("hpCurrent") : ""),
            data.hpMax = ((localStorage.getItem("hpMax") != null && localStorage.getItem("hpMax") != "" && localStorage.getItem("hpMax") != undefined) ? localStorage.getItem("hpMax") : ""),
            data.playerName = "You"
            data.player = "You"

            let hpWrapper = document.createElement("div")
            hpWrapper.setAttribute("data-player", data.player)
            hpWrapper.style.display = "flex"

            let playerNameText = document.createElement("p")
            playerNameText.innerText = data.playerName + ":"
            playerNameText.classList.add("playerName")

            let playerHPProgressBarWrapper = document.createElement("div")
            playerHPProgressBarWrapper.classList.add("health-bar")

            let playerHpBar = document.createElement("div")
            playerHpBar.classList.add("bar")

            let playerHpHit = document.createElement("div")
            playerHpHit.classList.add("hit")

            playerHpBar.appendChild(playerHpHit)
            playerHPProgressBarWrapper.appendChild(playerHpBar)

            hpWrapper.appendChild(playerNameText)
            hpWrapper.appendChild(playerHPProgressBarWrapper)
            document.getElementById("playerHPContainer").appendChild(hpWrapper)

            updatePlayerHP(data)

            document.getElementById("playerHPContainer").style.display = "block"

            Split(['#owlbear', '#characterSheets'], {
                gutterSize: 7,
                minSize: [500, 1],
                cursor: "e-resize",
                expandToMin: true,
                sizes: sizes,
                snapOffset: 0,
                onDragEnd: function (sizes) {
                    localStorage.setItem('split-sizes', JSON.stringify(sizes))
                },
            })

            Split(['#mainContent', '#dmContent'], {
                direction: "vertical",
                minSize: [500, 1],
                sizes: [90, 10],
                expandToMin: true,
                cursor: 'n-resize',
                gutterSize: 7,
                snapOffset: 0,
            })

            Object.keys(localStorage).forEach(function(key){
                if (key == "split-sizes") return
                if (key == "session_code") return
                let value = localStorage.getItem(key)
                if (value == "true" || value == "false") {
                    if (value == "true") {
                        document.getElementById(key.replace("_img", "")).setAttribute('checked', 'checked')
                    } else {
                        document.getElementById(key.replace("_img", "")).removeAttribute('checked')
                    }
                } else {
                    document.getElementById(key.replace("_img", "")).value = value
                }
            })

            replaceChecks(false)
        </script>
    </body>
</html>